!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.inventory=e():t.inventory=e()}(this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/codebase/",e(e.s=63)}([function(t,e,n){"use strict";function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t){"/"===t[0]&&(t=t.substr(1));for(var e=t.split("/"),n=[],i=0;i<e.length;i++){var r=e[i],o={},a=r.indexOf(":");if(-1===a&&(a=r.indexOf("?")),-1!==a)for(var s=r.substr(a+1).split(/[\:\?\&]/g),u=s,c=Array.isArray(u),l=0,u=c?u:u[Symbol.iterator]();;){var p;if(c){if(l>=u.length)break;p=u[l++]}else{if(l=u.next(),l.done)break;p=l.value}var f=p,h=f.split("=");o[h[0]]=decodeURIComponent(h[1])}n[i]={page:a>-1?r.substr(0,a):r,params:o,isNew:!0}}return n}function s(t){for(var e=[],n=t,i=Array.isArray(n),r=0,n=i?n:n[Symbol.iterator]();;){var o;if(i){if(r>=n.length)break;o=n[r++]}else{if(r=n.next(),r.done)break;o=r.value}var a=o;e.push("/"+a.page);var s=u(a.params);s&&e.push("?"+s)}return e.join("")}function u(t){var e=[];for(var n in t)e.length&&e.push("&"),e.push(n+"="+encodeURIComponent(t[n]));return e.join("")}function c(t){if(!F&&t){F=!0;var e=window;e.Promise||(e.Promise=t.promise);var n=t.version.split(".");10*n[0]+1*n[1]<53&&(t.ui.freeze=function(e){var n=e();return n&&n.then?n.then(function(e){return t.ui.$freeze=!1,t.ui.resize(),e}):(t.ui.$freeze=!1,t.ui.resize()),n});var i=t.ui.baselayout.prototype.addView,r=t.ui.baselayout.prototype.removeView,o={addView:function(t,e){var n=this;if(!this.$scope||!this.$scope.webixJet)return i.apply(this,arguments);var r=function(){var r=n.$scope,o={};t=r.app.copyConfig(t,{},o),i.apply(n,[t,e]);for(var a in o)!function(t){r._renderFrame(t,o[t],null).then(function(){r._subs[t]=o[t]})}(a);return{v:t.id}}();return"object"===(void 0===r?"undefined":k(r))?r.v:void 0},removeView:function(){if(r.apply(this,arguments),this.$scope&&this.$scope.webixJet){var e=this.$scope._subs;for(var n in e){var i=e[n];t.$$(i.id)||(i.view.destructor(),delete e[n])}}}};t.extend(t.ui.layout.prototype,o,!0),t.extend(t.ui.baselayout.prototype,o,!0),t.protoUI({name:"jetapp",$init:function(e){this.$app=new this.app(e);var n=t.uid().toString();e.body={id:n},this.$ready.push(function(){this.$app.render({id:n})});for(var i in this.$app){var r=this.$app[i];"function"!=typeof r||this[i]||(this[i]=r.bind(this.$app))}}},t.ui.proxy)}}function l(t,e,n){e.on(t,"app:guard",function(t,i,r){if(i===e||i.contains(e)){var o=n();r.confirm=!1===o?Promise.reject(o):r.confirm.then(function(){return o})}})}function p(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function f(t,e,n){for(var i in t)p(t,i)&&e.call(n||t,t[i],i,t)}function h(t){return t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}function d(t){t="Warning: "+t,"undefined"!=typeof console&&console.error(t);try{throw new Error(t)}catch(t){}}function b(t){var e={};return f(t,function(t,n){f(t,function(t){e[t]=n})}),e}function y(t){var e=b(K);return e[t]||e[H.call(t,/-/,1)[0]]||e.en}function w(t,e){return W[y(t)](e)}function v(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function m(t){var e=t&&t.prefix||"%{",n=t&&t.suffix||"}";if(e===z||n===z)throw new RangeError('"'+z+'" token is reserved for pluralization');return new RegExp(v(e)+"(.*?)"+v(n),"g")}function g(t,e,n,i){if("string"!=typeof t)throw new TypeError("Polyglot.transformPhrase expects argument #1 to be string");if(null==e)return t;var r=t,o=i||J,a="number"==typeof e?{smart_count:e}:e;if(null!=a.smart_count&&r){var s=H.call(r,z);r=h(s[w(n||"en",a.smart_count)]||s[0])}return r=B.call(r,o,function(t,e){return p(a,e)&&null!=a[e]?B.call(a[e],q,Y):t})}function _(t){var e=t||{};this.phrases={},this.extend(e.phrases||{}),this.currentLocale=e.locale||"en";var n=e.allowMissing?g:null;this.onMissingKey="function"==typeof e.onMissingKey?e.onMissingKey:n,this.warn=e.warn||d,this.tokenRegex=m(e.interpolation)}function x(t,e,i){function r(e,n,r){n.__esModule&&(n=n.default);var o={phrases:n};i.polyglot&&t.webix.extend(o,i.polyglot);var a=c.polyglot=new X(o);if(a.locale(e),c._=t.webix.bind(a.t,a),u=e,s&&s.put("lang",u),i.webix){var l=i.webix[e];l&&t.webix.i18n.setLocale(l)}return r?Promise.resolve():t.refresh()}function o(){return u}function a(t,e){if(!1!==i.path){var o=(i.path?i.path+"/":"")+t;r(t,n(74)("./"+o),e)}}i=i||{};var s=i.storage,u=s?s.get("lang")||"en":i.lang||"en",c={getLang:o,setLang:a,setLangData:r,_:null,polyglot:null};t.setService("locale",c),a(u,!0)}function O(t,e,n){if(e.urls)n=e.urls[n]||n;else if(e.param){var i;i={},i[e.param]=n,n=i}t.show(n)}function P(t,e,n){var i=e.getUrl()[0].view,r=e.$$(n.id||n),o=!1;r.attachEvent("onchange",function(){o||O(i,n,this.getValue())}),r.getSelectedId&&r.attachEvent("onitemclick",function(t){t==this.getSelectedId()&&O(i,n,t)}),r.attachEvent("onafterselect",function(){if(!o){var t=null;r.setValue?t=this.getValue():r.getSelectedId&&(t=r.getSelectedId()),O(i,n,t)}}),e.on(t,"app:route",function(){var t="";if(n.param)t=e.getParam(n.param,!0);else{var a=i.getUrl()[1];a&&(t=a.page)}t&&(o=!0,r.setValue&&r.getValue()!==t?r.setValue(t):r.select&&r.exists(t)&&r.getSelectedId()!==t&&r.select(t),o=!1)})}function j(t,e,n){function i(t){var i=e.$$(n.target);i&&(t||(t="<div class='status_"+p+"'><span class='webix_icon fa-"+y[p]+"'></span> "+b[p]+"</div>"),i.setHTML(t))}function r(){f--,c("good")}function o(t){f--,c("error",t)}function a(t){f++,c("saving"),t&&t.then&&t.then(r,o)}function s(){return p}function u(){0===f&&i(" ")}function c(e,n){f<0&&(f=0),"saving"===e?(p="saving",i()):(h="error"===e,0===f&&(p=h?"error":"good",h?t.error("app:error:server",[n.responseText||n]):d&&setTimeout(u,d),i()))}function l(n){var i=t.webix.dp(n);i&&(e.on(i,"onAfterDataSend",a),e.on(i,"onAfterSaveError",function(t,e,n){return o(n)}),e.on(i,"onAfterSave",r))}var p="good",f=0,h=!1,d=n.expire;d||!1===d||(d=2e3);var b=n.texts||Z,y=n.icons||Q;"string"==typeof n&&(n={target:n}),t.setService("status",{getStatus:s,setStatus:c,track:l}),n.remote&&e.on(t.webix,"onRemoteCall",a),n.ajax&&e.on(t.webix,"onBeforeAjax",function(t,e,n,i,r,o,s){a(s)}),n.data&&l(n.data)}function $(t,e,n){n=n||{};var i=n.storage,r=i?i.get("theme")||"flat-default":n.theme||"flat-default",o={getTheme:function(){return r},setTheme:function(e,n){for(var o=e.split("-"),a=document.getElementsByTagName("link"),s=0;s<a.length;s++){var u=a[s].getAttribute("title");u&&(u===e||u===o[0]?a[s].disabled=!1:a[s].disabled=!0)}t.webix.skin.set(o[0]),t.webix.html.removeCss(document.body,"theme-"+r),t.webix.html.addCss(document.body,"theme-"+e),r=e,i&&i.put("theme",e),n||t.refresh()}};t.setService("theme",o),o.setTheme(r,!0)}function S(t,e,n){for(var i=0;i<n.length;i++)t[n[i]]=e[i+1]?e[i+1].page:""}function I(t,e,n){var i=n.route||n,r={};e.on(t,"app:urlchange",function(t,n){e===t&&(S(r,n.suburl(),i),n.size(i.length+1))});var o=e.setParam,a=e.getParam;e.setParam=function(t,n,a){var s=i.indexOf(t);return s>=0?(r[t]=n,this._segment.update("",n,s+1),a?e.show(null):void 0):o.call(this,t,n,a)},e.getParam=function(t,e){var n=r[t];return void 0!==n?n:a.call(this,t,e)},S(r,e.getUrl(),i)}function E(t,e,n){function i(t,e){t===o?(p.logout(),e.redirect=s):t===r||p.getStatus()||(e.redirect=r)}n=n||{};var r=n.login||"/login",o=n.logout||"/logout",a=n.afterLogin||t.config.start,s=n.afterLogout||"/login",u=n.ping||3e5,c=n.model,l=n.user,p={getUser:function(){return l},getStatus:function(t){return t?c.status().catch(function(){return null}).then(function(t){l=t}):null!==l},login:function(e,n){return c.login(e,n).then(function(e){if(l=e,!e)throw new Error("Access denied");t.callEvent("app:user:login",[l]),t.show(a)})},logout:function(){return l=null,c.logout().then(function(e){return t.callEvent("app:user:logout",[]),e})}};t.setService("user",p),t.attachEvent("app:guard",function(t,e,r){return!(!n.public||!n.public(t))||(void 0===l&&(r.confirm=p.getStatus(!0).then(function(){return i(t,r)})),i(t,r))}),u&&setInterval(function(){return p.getStatus(!0)},u)}n.d(e,"d",function(){return et}),n.d(e,"a",function(){return N}),n.d(e,"b",function(){return C}),n.d(e,"c",function(){return L});var k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},T=function(){function t(e){o(this,t),this.webixJet=!0,this.webix=e,this._events=[],this._subs={},this._data={}}return t.prototype.getRoot=function(){return this._root},t.prototype.destructor=function(){this._detachEvents(),this._destroySubs(),this._events=this._container=this.app=this._parent=this._root=null},t.prototype.setParam=function(t,e,n){this._data[t]!==e&&(this._data[t]=e,this._segment.update(t,e,0),n&&this.show(null))},t.prototype.getParam=function(t,e){var n=this._data[t];if(void 0!==n||!e)return n;var i=this.getParentView();return i?i.getParam(t,e):void 0},t.prototype.getUrl=function(){return this._segment.suburl()},t.prototype.getUrlString=function(){return this._segment.toString()},t.prototype.getParentView=function(){return this._parent},t.prototype.$$=function(t){if("string"==typeof t){var e=this.getRoot();return e.queryView(function(n){return(n.config.id===t||n.config.localId===t)&&n.$scope===e.$scope},"self")}return t},t.prototype.on=function(t,e,n){var i=t.attachEvent(e,n);return this._events.push({obj:t,id:i}),i},t.prototype.contains=function(t){for(var e in this._subs){var n=this._subs[e].view;if(n===t||n.contains(t))return!0}return!1},t.prototype.getSubView=function(t){var e=this.getSubViewInfo(t);if(e)return e.subview.view},t.prototype.getSubViewInfo=function(t){var e=this._subs[t||"default"];return e?{subview:e,parent:this}:"_top"===t?(this._subs[t]={url:"",id:null,popup:!0},this.getSubViewInfo(t)):this._parent?this._parent.getSubViewInfo(t):null},t.prototype._detachEvents=function(){for(var t=this._events,e=t.length-1;e>=0;e--)t[e].obj.detachEvent(t[e].id)},t.prototype._destroySubs=function(){for(var t in this._subs){var e=this._subs[t].view;e&&e.destructor()}this._subs={}},t.prototype._init_url_data=function(){var t=this._segment.current();this._data={},this.webix.extend(this._data,t.params,!0)},t.prototype._getDefaultSub=function(){if(this._subs.default)return this._subs.default;for(var t in this._subs){var e=this._subs[t];if(!e.branch&&e.view&&"_top"!==t){var n=e.view._getDefaultSub();if(n)return n}}},t.prototype._routed_view=function(){var t=this.getParentView();if(!t)return!0;var e=t._getDefaultSub();return!(!e&&e!==this)&&t._routed_view()},t}(),D=function(){function t(e,n){o(this,t),this._next=1,this.route="string"==typeof e?{url:a(e),path:e}:e,this.index=n}return t.prototype.current=function(){return this.route.url[this.index]},t.prototype.next=function(){return this.route.url[this.index+this._next]},t.prototype.suburl=function(){return this.route.url.slice(this.index)},t.prototype.shift=function(){return new t(this.route,this.index+this._next)},t.prototype.refresh=function(){for(var t=this.route.url,e=this.index+1;e<t.length;e++)t[e].isNew=!0},t.prototype.toString=function(){var t=s(this.suburl());return t?t.substr(1):""},t.prototype._join=function(t,e){var n=this.route.url;if(null===t)return n;var i=this.route.url;if(n=i.slice(0,this.index+(e?this._next:0)),t){n=n.concat(a(t));for(var r=0;r<n.length;r++)i[r]&&(n[r].view=i[r].view),i[r]&&n[r].page===i[r].page&&(n[r].isNew=!1)}return n},t.prototype.append=function(t){var e=this._join(t,!0);return this.route.path=s(e),this.route.url=e,this.route.path},t.prototype.show=function(t,e,n){var i=this,r=this._join(t,n);return new Promise(function(t,n){var o=s(r),a={url:r,redirect:o,confirm:Promise.resolve()},u=e?e.app:null;if(u){if(!u.callEvent("app:guard",[a.redirect,e,a]))return void n()}a.confirm.catch(function(){return a.redirect=null}).then(function(){return null===a.redirect?void n():a.redirect!==o?(u.show(a.redirect),void n()):(i.route.path=o,i.route.url=r,void t())})})},t.prototype.size=function(t){this._next=t},t.prototype.split=function(){var e={url:this.route.url.slice(this.index+1),path:""};return e.url.length&&(e.path=s(e.url)),new t(e,0)},t.prototype.update=function(t,e,n){var i=this.route.url[this.index+(n||0)];if(!i)return this.route.url.push({page:"",params:{}}),this.update(t,e,n);""===t?i.page=e:i.params[t]=e,this.route.path=s(this.route.url)},t}(),C=function(t){function e(n,r){o(this,e);var a=i(this,t.call(this,n.webix));return a.app=n,a._children=[],a}return r(e,t),e.prototype.ui=function(t,e){e=e||{};var n=e.container||t.container,i=this.app.createView(t);return this._children.push(i),i.render(n,this._segment,this),"object"!==(void 0===t?"undefined":k(t))||t instanceof T?i:i.getRoot()},e.prototype.show=function(t,e){if(e=e||{},"object"===(void 0===t?"undefined":k(t))){for(var n in t)this.setParam(n,t[n]);t=null}else{if("/"===t.substr(0,1))return this.app.show(t);if(0===t.indexOf("./")&&(t=t.substr(2)),0===t.indexOf("../")){var i=this.getParentView();return i?i.show(t.substr(3),e):this.app.show("/"+t.substr(3))}var r=this.getSubViewInfo(e.target);if(r){if(r.parent!==this)return r.parent.show(t,e);if(e.target&&"default"!==e.target)return this._renderFrameLock(e.target,r.subview,t)}else if(t)return this.app.show("/"+t)}return this._show(this._segment,t,this)},e.prototype._show=function(t,e,n){var i=this;return t.show(e,n,!0).then(function(){return i._init_url_data(),i._urlChange()}).then(function(){t.route.linkRouter&&(i.app.getRouter().set(t.route.path,{silent:!0}),i.app.callEvent("app:route",[t.route.path]))})},e.prototype.init=function(t,e){},e.prototype.ready=function(t,e){},e.prototype.config=function(){this.app.webix.message("View:Config is not implemented")},e.prototype.urlChange=function(t,e){},e.prototype.destroy=function(){},e.prototype.destructor=function(){this.destroy(),this._destroyKids(),this._root.destructor(),t.prototype.destructor.call(this)},e.prototype.use=function(t,e){t(this.app,this,e)},e.prototype.refresh=function(){this.getUrl();return this.destroy(),this._destroyKids(),this._destroySubs(),this._detachEvents(),this._container.tagName&&this._root.destructor(),this._segment.refresh(),this._render(this._segment)},e.prototype.render=function(t,e,n){var i=this;"string"==typeof e&&(e=new D(e,0)),this._segment=e,this._parent=n,this._init_url_data(),t=t||document.body;var r="string"==typeof t?this.webix.toNode(t):t;return this._container!==r?(this._container=r,this._render(e)):this._urlChange().then(function(){return i.getRoot()})},e.prototype._render=function(t){var e=this,n=this.config();return n.then?n.then(function(n){return e._render_final(n,t)}):this._render_final(n,t)},e.prototype._render_final=function(t,e){var n=this,i=null,r=null,o=!1;if(this._container.tagName?r=this._container:(i=this._container,i.popup?(r=document.body,o=!0):r=this.webix.$$(i.id)),!this.app||!r)return Promise.reject(null);var a=void 0,s=this._segment.current(),u={ui:{}};this.app.copyConfig(t,u.ui,this._subs),this.app.callEvent("app:render",[this,e,u]),u.ui.$scope=this,!i&&s.isNew&&s.view&&s.view.destructor();try{if(i&&!o){var c=r,l=c.getParentView();l&&"multiview"===l.name&&!u.ui.id&&(u.ui.id=c.config.id)}this._root=this.app.webix.ui(u.ui,r);var p=this._root;if(o)if(p.setPosition&&!p.isVisible())p.show();else{var f=this._root.$view.style;f.position="absolute",f.top=f.left="0px",f.zIndex=1}i&&(i.view&&i.view!==this&&i.view!==this.app&&i.view.destructor(),i.id=this._root.config.id,this.getParentView()||!this.app.app?i.view=this:i.view=this.app),s.isNew&&(s.view=this,s.isNew=!1),a=Promise.resolve(this._init(this._root,e)).then(function(){return n._urlChange().then(function(){return n._initUrl=null,n.ready(n._root,e.suburl())})})}catch(t){a=Promise.reject(t)}return a.catch(function(t){return n._initError(n,t)})},e.prototype._init=function(t,e){return this.init(t,e.suburl())},e.prototype._urlChange=function(){var t=this;this.app.callEvent("app:urlchange",[this,this._segment]);var e=[];for(var n in this._subs){var i=this._subs[n],r=this._renderFrameLock(n,i,null);r&&e.push(r)}return Promise.all(e).then(function(){return t.urlChange(t._root,t._segment.suburl())})},e.prototype._renderFrameLock=function(t,e,n){if(!e.lock){var i=this._renderFrame(t,e,n);i&&(e.lock=i.then(function(){return e.lock=null},function(){return e.lock=null}))}return e.lock},e.prototype._renderFrame=function(t,e,n){var i=this;if("default"===t){if(this._segment.next())return this._createSubView(e,this._segment.shift());e.view&&e.popup&&(e.view.destructor(),e.view=null)}if(e.condition){var r=e.condition(this);r!==e.url&&(n=r)}if(null!==n&&(e.url=n),e.route){if(null!==n)return e.route.show(n,e.view).then(function(){return i._createSubView(e,e.route)});if(e.branch)return}var o=e.view;if(!o&&e.url){if("string"==typeof e.url)return e.route=new D(e.url,0),this._createSubView(e,e.route);"function"!=typeof e.url||o instanceof e.url||(o=new e.url(this.app,"")),o||(o=e.url)}if(o)return o.render(e,e.route||this._segment,this)},e.prototype._initError=function(t,e){return this.app&&this.app.error("app:error:initview",[e,t]),!0},e.prototype._createSubView=function(t,e){var n=this;return this.app.createFromURL(e.current(),t.view).then(function(i){return i.render(t,e,n)})},e.prototype._destroyKids=function(){for(var t=this._children,e=t.length-1;e>=0;e--)t[e]&&t[e].destructor&&t[e].destructor();this._children=[]},e}(T),U=function(t){function e(n,r){o(this,e);var a=i(this,t.call(this,n,r));return a._ui=r.ui,a}return r(e,t),e.prototype.config=function(){return this._ui},e}(C),R=function(){function t(e,n,i){o(this,t),this.path="",this.app=i}return t.prototype.set=function(t,e){this.path=t;var n=this.app;n.app.getRouter().set(n._segment.append(this.path),{silent:!0})},t.prototype.get=function(){return this.path},t}(),M=!0,A=function(t){function e(n){o(this,e);var r=(n||{}).webix||window.webix,a=i(this,t.call(this,r));return a.config=a.webix.extend({name:"App",version:"1.0",start:"/home"},n,!0),a.app=a.config.app,a.ready=Promise.resolve(),a._services={},a.webix.extend(a,a.webix.EventSystem),a}return r(e,t),e.prototype.getUrl=function(){return this._subSegment.suburl()},e.prototype.getUrlString=function(){return this._subSegment.toString()},e.prototype.getService=function(t){var e=this._services[t];return"function"==typeof e&&(e=this._services[t]=e(this)),e},e.prototype.setService=function(t,e){this._services[t]=e},e.prototype.destructor=function(){this.getSubView().destructor(),t.prototype.destructor.call(this)},e.prototype.copyConfig=function(t,e,n){if((t instanceof T||"function"==typeof t&&t.prototype instanceof T)&&(t={$subview:t}),void 0!==t.$subview)return this.addSubView(t,e,n);e=e||(t instanceof Array?[]:{});for(var i in t){var r=t[i];if("function"==typeof r&&r.prototype instanceof T&&(r={$subview:r}),!r||"object"!==(void 0===r?"undefined":k(r))||r instanceof this.webix.DataCollection||r instanceof RegExp)e[i]=r;else if(r instanceof Date)e[i]=new Date(r);else{var o=this.copyConfig(r,r instanceof Array?[]:{},n);null!==o&&(e[i]=o)}}return e},e.prototype.getRouter=function(){return this.$router},e.prototype.clickHandler=function(t){if(t){var e=t.target||t.srcElement;if(e&&e.getAttribute){var n=e.getAttribute("trigger");n&&this._forView(e,function(t){return t.app.trigger(n)});var i=e.getAttribute("route");i&&this._forView(e,function(t){return t.show(i)})}}},e.prototype.getRoot=function(){return this.getSubView().getRoot()},e.prototype.refresh=function(){var t=this;return this._subSegment?this.getSubView().refresh().then(function(e){return t.callEvent("app:route",[t.getUrl()]),e}):Promise.resolve(null)},e.prototype.loadView=function(t){var e=this,n=this.config.views,i=null;if(""===t)return Promise.resolve(this._loadError("",new Error("Webix Jet: Empty url segment")));try{n&&"string"==typeof(i="function"==typeof n?n(t):n[t])&&(t=i,i=null),i||(i="_blank"===t?{}:"_hidden"===t?{hidden:!0}:this._loadViewDynamic(t))}catch(e){i=this._loadError(t,e)}return i.then||(i=Promise.resolve(i)),i=i.then(function(t){return t.__esModule?t.default:t}).catch(function(n){return e._loadError(t,n)})},e.prototype._forView=function(t,e){var n=this.webix.$$(t);n&&e(n.$scope)},e.prototype._loadViewDynamic=function(t){return null},e.prototype.createFromURL=function(t,e){var n=this;return t.isNew||!t.view?this.loadView(t.page).then(function(t){return n.createView(t,name)}):Promise.resolve(t.view)},e.prototype.createView=function(t,n){if("function"==typeof t){if(t.prototype instanceof e)return new t({app:this,name:n,router:R});if(t.prototype instanceof T)return new t(this,{name:n});t=t(this)}return t instanceof T?t:new U(this,{name:n,ui:t})},e.prototype.show=function(t){return this.render(this._container,t||this.config.start)},e.prototype.trigger=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];this.apply(t,n)},e.prototype.apply=function(t,e){this.callEvent(t,e)},e.prototype.action=function(t){return this.webix.bind(function(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];this.apply(t,n)},this)},e.prototype.on=function(t,e){this.attachEvent(t,e)},e.prototype.use=function(t,e){t(this,null,e)},e.prototype.error=function(t,e){if(this.callEvent(t,e),this.callEvent("app:error",e),this.config.debug)for(var n=0;n<e.length;n++)if(console.error(e[n]),e[n]instanceof Error){var i=e[n].message;0===i.indexOf("Module build failed")?(i=i.replace(/\x1b\[[0-9;]*m/g,""),document.body.innerHTML="<pre style='font-size:16px; background-color: #ec6873; color: #000; padding:10px;'>"+i+"</pre>"):(i+="<br><br>Check console for more details",this.webix.message({type:"error",text:i,expire:-1}))}},e.prototype.render=function(t,e,n){var i=this;this._container="string"==typeof t?this.webix.toNode(t):t||document.body;var r=!this.$router,o=null;r?(M&&(this.webix.attachEvent("onClick",function(t){return i.clickHandler(t)}),M=!1),"string"==typeof e&&(e=new D(e,0)),this._subSegment=this._first_start(e),this._subSegment.route.linkRouter=!0):o="string"==typeof e?e:this.app?e.split().route.path:e.toString();var a=this.getSubView(),s=this._subSegment,u=s.show(o,a).then(function(){return i.createFromURL(s.current(),a)}).then(function(e){return e.render(t,s)}).then(function(t){return i.$router.set(s.route.path,{silent:!0}),i.callEvent("app:route",[i.getUrl()]),t});return this.ready=this.ready.then(function(){return u}),u},e.prototype.getSubView=function(){if(this._subSegment){var t=this._subSegment.current().view;if(t)return t}return new C(this,{})},e.prototype._first_start=function(t){var e=this;this._segment=t;var n=function(t){return setTimeout(function(){e.show(t)},1)};if(this.$router=new this.config.router(n,this.config,this),this._container===document.body&&!1!==this.config.animation){var i=this._container;this.webix.html.addCss(i,"webixappstart"),setTimeout(function(){e.webix.html.removeCss(i,"webixappstart"),e.webix.html.addCss(i,"webixapp")},10)}if(t)this.app&&(t.current().view=this,t=t.next()?t.split():new D(this.config.start,0));else{var r=this.$router.get();r||(r=this.config.start,this.$router.set(r,{silent:!0})),t=new D(r,0)}return t},e.prototype._loadError=function(t,e){return this.error("app:error:resolve",[e,t]),{template:" "}},e.prototype.addSubView=function(t,e,n){var i=!0!==t.$subview?t.$subview:null,r=null;t.url&&("function"==typeof t.url?r=t.url:i=i||t.url);var o=t.name||(i?this.webix.uid():"default");return e.id=t.id||"s"+this.webix.uid(),(n[o]={id:e.id,url:i,branch:t.branch,popup:t.popup,condition:r}).popup?null:e},e}(T),V=function(){function t(e,n){var i=this;o(this,t),this.config=n||{},this._detectPrefix(),this.cb=e,window.onpopstate=function(){return i.cb(i.get())}}return t.prototype.set=function(t,e){var n=this;if(this.config.routes){var i=t.split("?",2);for(var r in this.config.routes)if(this.config.routes[r]===i[0]){t=r+(i.length>1?"?"+i[1]:"");break}}this.get()!==t&&window.history.pushState(null,null,this.prefix+this.sufix+t),e&&e.silent||setTimeout(function(){return n.cb(t)},1)},t.prototype.get=function(){var t=this._getRaw().replace(this.prefix,"").replace(this.sufix,"");if(t="/"!==t?t:"",this.config.routes){var e=t.split("?",2),n=this.config.routes[e[0]];n&&(t=n+(e.length>1?"?"+e[1]:""))}return t},t.prototype._detectPrefix=function(){var t=this.config.routerPrefix;this.sufix="#"+(void 0===t?"!":t),this.prefix=document.location.href.split("#",2)[0]},t.prototype._getRaw=function(){return document.location.href},t}(),F=!1,N=function(t){function e(n){o(this,e),n.router=n.router||V;var r=i(this,t.call(this,n));return c(r.webix),r}return r(e,t),e.prototype._loadViewDynamic=function(t){return t=t.replace(/\./g,"/"),n(65)("./"+t)},e}(A),L=(function(){function t(e,n,i){o(this,t),this.storage=n.storage||i.webix.storage.session,this.name=n.storeName||n.id+":route",this.cb=e}t.prototype.set=function(t,e){var n=this;this.storage.put(this.name,t),e&&e.silent||setTimeout(function(){return n.cb(t)},1)},t.prototype.get=function(){return this.storage.get(this.name)}}(),function(t){function e(){return o(this,e),i(this,t.apply(this,arguments))}return r(e,t),e.prototype._detectPrefix=function(){this.prefix="",this.sufix=this.config.routerPrefix||""},e.prototype._getRaw=function(){return document.location.pathname},e}(V)),B=(function(){function t(e,n){o(this,t),this.path="",this.cb=e}t.prototype.set=function(t,e){var n=this;this.path=t,e&&e.silent||setTimeout(function(){return n.cb(t)},1)},t.prototype.get=function(){return this.path}}(),String.prototype.replace),H=String.prototype.split,z="||||",G=function(t){var e=t%10;return 11!==t&&1===e?0:2<=e&&e<=4&&!(t>=12&&t<=14)?1:2},W={arabic:function(t){if(t<3)return t;var e=t%100;return e>=3&&e<=10?3:e>=11?4:5},bosnian_serbian:G,chinese:function(){return 0},croatian:G,french:function(t){return t>1?1:0},german:function(t){return 1!==t?1:0},russian:G,lithuanian:function(t){return t%10==1&&t%100!=11?0:t%10>=2&&t%10<=9&&(t%100<11||t%100>19)?1:2},czech:function(t){return 1===t?0:t>=2&&t<=4?1:2},polish:function(t){if(1===t)return 0;var e=t%10;return 2<=e&&e<=4&&(t%100<10||t%100>=20)?1:2},icelandic:function(t){return t%10!=1||t%100==11?1:0},slovenian:function(t){var e=t%100;return 1===e?0:2===e?1:3===e||4===e?2:3}},K={arabic:["ar"],bosnian_serbian:["bs-Latn-BA","bs-Cyrl-BA","srl-RS","sr-RS"],chinese:["id","id-ID","ja","ko","ko-KR","lo","ms","th","th-TH","zh"],croatian:["hr","hr-HR"],german:["fa","da","de","en","es","fi","el","he","hi-IN","hu","hu-HU","it","nl","no","pt","sv","tr"],french:["fr","tl","pt-br"],russian:["ru","ru-RU"],lithuanian:["lt"],czech:["cs","cs-CZ","sk"],polish:["pl"],icelandic:["is"],slovenian:["sl-SL"]},q=/\$/g,Y="$$",J=/%\{(.*?)\}/g;_.prototype.locale=function(t){return t&&(this.currentLocale=t),this.currentLocale},_.prototype.extend=function(t,e){f(t,function(t,n){var i=e?e+"."+n:n;"object"===(void 0===t?"undefined":k(t))?this.extend(t,i):this.phrases[i]=t},this)},_.prototype.unset=function(t,e){"string"==typeof t?delete this.phrases[t]:f(t,function(t,n){var i=e?e+"."+n:n;"object"===(void 0===t?"undefined":k(t))?this.unset(t,i):delete this.phrases[i]},this)},_.prototype.clear=function(){this.phrases={}},_.prototype.replace=function(t){this.clear(),this.extend(t)},_.prototype.t=function(t,e){var n,i,r=null==e?{}:e;if("string"==typeof this.phrases[t])n=this.phrases[t];else if("string"==typeof r._)n=r._;else if(this.onMissingKey){var o=this.onMissingKey;i=o(t,r,this.currentLocale,this.tokenRegex)}else this.warn('Missing translation for key: "'+t+'"'),i=t;return"string"==typeof n&&(i=g(n,r,this.currentLocale,this.tokenRegex)),i},_.prototype.has=function(t){return p(this.phrases,t)},_.transformPhrase=function(t,e,n){return g(t,e,n)};var X=_,Q={good:"check",error:"warning",saving:"refresh fa-spin"},Z={good:"Ok",error:"Error",saving:"Connecting..."},tt=window.webix;tt&&c(tt);var et={UnloadGuard:l,Locale:x,Menu:P,Theme:$,User:E,Status:j,UrlParam:I},nt=window;nt.Promise||(nt.Promise=nt.webix.promise)},function(t,e,n){"use strict";function i(t,e){return remote.api.unit.addBatch(t,e).then(function(t,e){return t.forEach(function(t){return p.add(t,e)}),t[0].id})}function r(){p.clearAll(),p.parse(remote.api.unit.getAll())}function o(t){return remote.api.unit.getFullInfo(t)}function a(t,e){return remote.api.unit.assignOwner(t,e).then(function(t){t.forEach(function(t){return p.updateItem(t.id,t)})})}function s(t,e,n){return remote.api.unit.changeStatus(t,e,n).then(function(t){t.forEach(function(t){return p.updateItem(t.id,t)})})}function u(t,e){return remote.api.unit.updateBatch(t,e).then(function(t){t.forEach(function(t){return p.updateItem(t.id,t)})})}function c(t){return remote.api.unit.deleteBatch(t).then(function(t){t.forEach(function(t){return p.remove(t)})})}function l(t){return new Date-t.start<60*remote.data.graceTime.delete*1e3}n.d(e,"e",function(){return p}),e.a=i,e.i=r,e.h=o,e.b=a,e.d=s,e.j=u,e.f=c,e.c=l,n.d(e,"g",function(){return f});var p=new webix.DataCollection({scheme:{$change:function(t){t.start&&(t.start=new Date(t.start))}},url:remote.api.unit.getAll,save:remote.api.unit.save}),f=remote.api.unit.getByTag},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i=new webix.DataCollection({scheme:{$change:function(t){t.value=t.name}},url:remote.api.unittype.getAll,save:{url:remote.api.unittype.save,updateFromResponse:!0}});remote.api.unittype.archive},function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return r}),n.d(e,"c",function(){return o});var i=new webix.DataCollection({scheme:{$change:function(t){t.value=t.name,t.end=t.end?new Date(t.end):null}},url:remote.api.person.getAll,save:remote.api.person.save}),r=remote.api.person.getFullInfo,o=function(){remote.api.person.refresh().then(function(t){i.parse(t)})}},function(t,e,n){"use strict";function i(t){switch("string"==typeof t&&(t=parseInt(t)),t){case 1:return"Taken";case 0:return"Available";case 90:return"Broken";case 99:return"Deprecated"}}e.a=i},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=function(t){function e(n,o){i(this,e);var a=r(this,t.call(this,n,o));return a.Header=o.header,a.Body=o.body,a.Modal=o.modal,a}return o(e,t),e.prototype.config=function(){var t=this.Body,e=this.Header||!1,n={view:"window",borderless:!0,css:"edit_window",modal:this.Modal||!1,head:e,body:t};return this.app.Mobile?n.fullscreen=!0:(n.width=396,n.height=document.body.offsetHeight,n.position=function(t){t.top=0,t.left=document.body.offsetWidth-n.width}),n},e.prototype.init=function(){var t=this;this._resizeHandler=this.webix.event(window,"resize",function(){var e=t.getRoot();e.config.height=document.body.offsetHeight,e.resize()})},e.prototype.destroy=function(){this._resizeHandler&&(this.webix.eventRemove(this._resizeHandler),delete this._resizeHandler)},e.prototype.Hide=function(){this.show("../")},e}(a.b);e.default=s},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=function(t){function e(n,o){i(this,e);var a=r(this,t.call(this,n,o));return a.Template=o.template,a.SelectionHandler=o.selectionHandler,a.SrchPlaceholder=o.placeholder,a.Filter=o.filter,a.Width=o.width,a}return o(e,t),e.prototype.config=function(){var t=this;return{view:"popup",width:this.Width||200,body:{rows:[{view:"search",localId:"search",placeholder:this.SrchPlaceholder||"Filter items",on:{onTimedKeyPress:this.Filter||this.FilterOptions}},{view:"list",localId:"options",select:!0,autoheight:!0,scroll:"auto",css:"select_list",template:function(e){return t.Template(e)},yCount:8,on:{onAfterSelect:function(e){return t.SelectionHandler(e)},onBeforeSelect:function(t){return!this.getItem(t).disabled},onAfterLoad:function(){var t=this.count(),e=t<8?t:8;this.define({yCount:e}),this.refresh()}}},{template:"<div>Found nothing</div>",localId:"overlay",hidden:!0,height:40,borderless:!0,css:"selection_list_overlay"}]},on:{onShow:function(){t.$$("search").setValue(""),t.$$("search").focus()}}}},e.prototype.init=function(){var t=this;this.$$("options").data.attachEvent("onAfterFilter",function(){t.$$("options").count()?t.$$("overlay").hide():t.$$("overlay").show()})},e.prototype.FilterOptions=function(){var t=this.getValue().toLowerCase().trim();t?this.$scope.$$("options").filter(function(e){return-1!==e.value.toLowerCase().indexOf(t)}):this.$scope.$$("options").filter()},e.prototype.Hide=function(){this.getRoot().hide(),this.$$("options").unselect()},e}(a.b);e.default=s},function(t,e,n){"use strict";function i(t){return{view:"icon",icon:"mdi mdi-chevron-left",hidden:!t.app.Mobile,click:function(){window.history.back()}}}e.a=i},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=n(1),u=n(2),c=n(69),l=function(t){function e(){return i(this,e),r(this,t.apply(this,arguments))}return o(e,t),e.prototype.config=function(){var t=this;return{view:"dataview",localId:"data",css:"unit_groups",autowidth:!0,xCount:3,prerender:!0,type:{height:370,width:128,template:function(t){var e=t.using+t.spare,n=Math.floor(t.using/e*100),i=Object(c.a)(40,40,37,n),r=u.a.getItem(t.UnitTypeId).name;return'\n\t\t\t\t\t<div class="unit_group">\n\t\t\t\t\t\t<div class="unit_name" '+(r.length>14?'title="'+r+'"':"")+">"+r+'</div>\n\t\t\t\t\t\t<div class="unit_taken_chart showUsing" tabindex="0">\n\t\t\t\t\t\t\t<div class="unit_chart_legend">\n\t\t\t\t\t\t\t\t<span class="unit_category_title">Taken</span>\n\t\t\t\t\t\t\t\t<span class="unit_value">'+n+'%</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<svg class="units_chart" height="80" width="80">\n\t\t\t\t\t\t\t\t<circle cx="40" cy="40" r="37" stroke="#DADEE0" stroke-width="5" fill="none" />\n\t\t\t\t\t\t\t\t<path d="'+i+'" stroke="#1CA1C1" stroke-width="5" fill="none" />\n\t\t\t\t\t\t\t\tSorry, your browser does not support inline SVG.\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="unit_block showSpare" tabindex="0">\n\t\t\t\t\t\t\t<span class="unit_category_title">Available</span>\n\t\t\t\t\t\t\t<span class="unit_value">'+t.spare+' pcs</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="unit_block showBroke" tabindex="0">\n\t\t\t\t\t\t\t<span class="unit_category_title">Broken</span>\n\t\t\t\t\t\t\t<span class="unit_value">'+t.broke+' pcs</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="unit_block showDepre" tabindex="0">\n\t\t\t\t\t\t\t<span class="unit_category_title">Deprecated</span>\n\t\t\t\t\t\t\t<span class="unit_value">'+t.depre+" pcs</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t"}},onClick:{showSpare:function(e,n){return t.show("/inv/units?type="+n+"&status=0")},showUsing:function(e,n){return t.show("/inv/units?type="+n+"&status=1")},showBroke:function(e,n){return t.show("/inv/units?type="+n+"&status=90")},showDepre:function(e,n){return t.show("/inv/units?type="+n+"&status=99")}}}},e.prototype.init=function(){var t=this;this.Recalculate(),this.on(s.e.data,"onStoreUpdated",function(){t.Recalculate()})},e.prototype.Recalculate=function(){var t=this;Promise.all([s.e.waitData,u.a.waitData]).then(function(){var e=new webix.DataCollection({});webix.extend(e.data,webix.GroupStore),e.data.importData(s.e.data),e.data.filter(function(t){return!u.a.getItem(t.UnitTypeId).isArchived}),e.data.group({by:"UnitTypeId",map:{spare:[function(t){return 0===t.status?1:0},"sum"],using:[function(t){return 1===t.status?1:0},"sum"],broke:[function(t){return 90===t.status?1:0},"sum"],depre:[function(t){return 99===t.status?1:0},"sum"]}}),t.$$("data").data.importData(e),e.destructor(),webix.TooltipControl.addTooltip(t.$$("data").$view)})},e}(a.b);e.default=l},function(t,e,n){"use strict";function i(){return remote.api.tag.getAll().then(function(t){r.clearAll(),r.parse(t)})}n.d(e,"a",function(){return r}),e.b=i;var r=new webix.DataCollection({url:remote.api.tag.getAll,save:remote.api.tag.save,scheme:{$change:function(t){t.value=t.name}}})},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=n(23),u=function(t){function e(){return i(this,e),r(this,t.apply(this,arguments))}return o(e,t),e.prototype.config=function(){var t=this,e={view:"toolbar",css:"webix_bg_2",padding:{left:8},cols:[{view:"search",localId:"search",on:{onTimedKeyPress:function(){var e=t.$$("search").getValue().toLowerCase().trim();t.$$("list").filter(function(t){return-1!==t.name.toLowerCase().indexOf(e)})}}},{view:"icon",icon:"mdi mdi-plus",tooltip:"Add new role",click:function(){t.$$("list").unselect(),t.setParam("id","0"),t.show("./auth.roles.form/0")}}]},n={view:"list",localId:"list",select:!0,css:"webix_bg_2 multi-line-box",type:{template:"#name#",height:"auto"},on:{onBeforeSelect:function(e){t.setParam("id",e);var n=t.$$("list"),i=!t.app.Mobile;return t.show("./auth.roles.form/"+e).then(function(){i&&(n.blockEvent(),n.select(e),n.unblockEvent())}),!1}}},i={width:this.app.Size.databar,rows:[e,n]};return this.app.Mobile?i:{cols:[i,{$subview:!0}]}},e.prototype.init=function(){this.use(a.d.UrlParam,["id"])},e.prototype.ready=function(){var t=this,e=!this.app.Mobile;Object(s.c)().then(function(){var n=t.$$("list"),i=t.getParam("id");!i&&e&&(i=s.a.getFirstId()),n.sync(s.a),i&&"none"!=i?n.select(i):e&&t.show("empty"),t.on(s.a.data,"onIdChange",function(n,i){e&&t.$$("list").select(i)}),t.on(t.app,"onFormFinish",function(n,i){t.contains(n)&&e&&!i&&(t.setParam("id","none"),t.show("empty"))})})},e}(a.b);e.default=u},function(t,e,n){"use strict";function i(t,e){return e?webix.confirm({title:"The "+t+" will be removed permanently",text:"Are you sure?",type:"confirm-error"}):webix.promise.resolve(!0)}function r(){return webix.confirm({type:"confirm-error",title:"You have unsaved data",text:"Do you still want to leave?"})}e.a=i,e.b=r},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=n(24),u=function(t){function e(){return i(this,e),r(this,t.apply(this,arguments))}return o(e,t),e.prototype.config=function(){var t=this,e={view:"toolbar",css:"webix_bg_2",padding:{left:8},cols:[{view:"search",localId:"search",on:{onTimedKeyPress:function(){var e=t.$$("search").getValue().toLowerCase().trim();t.$$("list").filter(function(t){var n=-1!==t.name.toLowerCase().indexOf(e),i=-1!==t.email.toLowerCase().indexOf(e);return n||i})}}},{view:"icon",icon:"mdi mdi-plus",tooltip:"Add new account",click:function(){t.$$("list").unselect(),t.setParam("id","0"),t.show("./auth.users.form/0")}}]},n={view:"list",localId:"list",select:!0,css:"webix_bg_2 multi-line-box",type:{template:"<span class='archived-#isArchived#'><b>#name#</b><br>#email#</span>",height:"auto"},on:{onBeforeSelect:function(e){t.setParam("id",e);var n=t.$$("list"),i=!t.app.Mobile;return t.show("./auth.users.form/"+e).then(function(){i&&(n.blockEvent(),n.select(e),n.unblockEvent())}),!1}}},i={width:this.app.Size.databar,rows:[e,n]};return this.app.Mobile?i:{cols:[i,{$subview:!0}]}},e.prototype.init=function(){this.use(a.d.UrlParam,["id"])},e.prototype.ready=function(){var t=this,e=!this.app.Mobile;Object(s.b)().then(function(){var n=t.$$("list"),i=t.getParam("id");!i&&e&&(i=s.a.getFirstId()),n.sync(s.a),i&&"none"!=i?n.select(i):e&&t.show("empty"),t.on(s.a.data,"onIdChange",function(n,i){e&&t.$$("list").select(i)}),t.on(t.app,"onFormFinish",function(n,i){t.contains(n)&&e&&!i&&(t.setParam("id","none"),t.show("empty"))})})},e}(a.b);e.default=u},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=function(t){function e(){return i(this,e),r(this,t.apply(this,arguments))}return o(e,t),e.prototype.config=function(){var t=this,e={rows:[{view:"form",localId:"form",rows:[{view:"text",name:"email",label:"Email",labelPosition:"top"},{view:"text",type:"password",name:"pass",label:"Password",labelPosition:"top"},{view:"button",css:"webix_primary",value:"Login",inputWidth:130,align:"center",hotkey:"enter",click:function(){return t.Login()}},{view:"template",height:30,borderless:!0,template:"\n<span style='float:right'>\n\t<a class='action-link' route='./login.restore'>Restore</a>\na password</span>"},{template:" OR ",type:"section"},{view:"button",value:"Login with Google",click:function(){return t.LoginWithGoogle()}}],rules:{email:webix.rules.isNotEmpty,pass:webix.rules.isNotEmpty}}]},n={type:"header",localId:"head",template:"Webix Inventory",css:"webix_dark"},i={view:"window",position:"center",head:n,body:e};return this.app.Mobile?(i.fullscreen=!0,e.scroll=!0):e.width=450,i},e.prototype.init=function(){this.getRoot().show(),this.$$("form").focus()},e.prototype.Login=function(){var t=this,e=this.$$("form");if(e.validate()){var n=e.getValues();this.$$("head").setHTML(" "),this.getRoot().$view.classList.remove("invalid_window"),this.app.getService("auth").login(n.email,n.pass).then(function(){"login"===t.getUrl()[0].page?t.show("/inv"):t.app.refresh()},function(){return t.IncorrectLogin()})}},e.prototype.LoginWithGoogle=function(){document.location.href="/auth/google/login"},e.prototype.IncorrectLogin=function(){this.getRoot().$view.classList.add("invalid_window"),this.$$("head").setHTML("Sorry, we can't find such account")},e}(a.b);e.default=s},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(){var t=this.getParentView();-1!==this.config.icon.indexOf("magnify")?(t.showBatch("search"),this.$scope.$$("search").focus(),this.config.icon="mdi mdi-close"):(t.showBatch("default"),this.config.icon="mdi mdi-magnify",this.$scope.$$("search").setValue("")),this.refresh()}Object.defineProperty(e,"__esModule",{value:!0});var s=n(0),u=n(3),c=function(t){function e(){return i(this,e),r(this,t.apply(this,arguments))}return o(e,t),e.prototype.config=function(){var t=this,e={view:"toolbar",localId:"toolbar",css:"webix_bg_2",visibleBatch:"default",cols:[{width:16,batch:"default"},{view:"label",label:"Persons",batch:"default"},{view:"text",localId:"search",batch:"search",tooltip:"Click to search for people",on:{onTimedKeyPress:function(){var e=t.$$("search").getValue().toLowerCase().trim();t.$$("list").filter(function(t){var n=-1!==t.name.toLowerCase().indexOf(e),i=-1!==t.email.toLowerCase().indexOf(e);return n||i})}}},{view:"icon",icon:"mdi mdi-magnify",click:a},{view:"icon",icon:"mdi mdi-sync",tooltip:"Refresh data",click:function(){return Object(u.c)()},batch:"default"}]},n=function(t){return t?"<span class='fired-date'>"+webix.i18n.dateFormatStr(t)+"</span>":""},i={view:"list",localId:"list",select:!0,css:"webix_bg_2 multi-line-box",type:{template:function(t){return"<span class='archived-"+!!t.end+"'>"+n(t.end)+"<b>"+t.name+"</b><br>"+t.email+"</span>"},height:70},on:{onAfterSelect:function(e){t.setParam("id",e),t.show("./persons.details/"+e)}}},r={width:this.app.Size.databar,rows:[e,i]};return this.app.Mobile?r:{cols:[r,{$subview:!0}]}},e.prototype.init=function(){this.use(s.d.UrlParam,["id"])},e.prototype.ready=function(){var t=this,e=!this.app.Mobile;u.a.waitData.then(function(){var n=t.$$("list"),i=t.getParam("id",!0);!i&&e&&(i=u.a.getFirstId()),n.sync(u.a),i&&"none"!=i?n.select(i):e&&t.show("empty"),t.on(u.a.data,"onIdChange",function(n,i){e&&t.$$("list").select(i)}),t.on(t.app,"onFormFinish",function(n,i){t.contains(n)&&e&&!i&&(t.setParam("id","none"),t.show("empty"))})})},e}(s.b);e.default=c},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),s=n(6),u=function(t){function e(n){var o;return i(this,e),o=r(this,t.call(this,n,{template:function(t){return t.serial+" "+t.name},selectionHandler:function(t){o.Defer.resolve(t),o.Hide()},filter:function(){var t=this.getValue().toLowerCase().trim();this.$scope.$$("options").filter(function(e){var n=-1!==e.name.toLowerCase().indexOf(t),i=-1!==e.serial.toLowerCase().indexOf(t);return n||i})},placeholder:"Search by name or serial",width:360}))}return o(e,t),e.prototype.Show=function(t,e,n){if(this.Defer=new webix.promise.defer,n)this.$$("options").clearAll(),this.$$("options").parse(n);else{var i=new webix.DataCollection({});i.data.importData(a.e),i.filter(function(t){return 0==t.status&&t.UnitTypeId==e&&!t.MasterUnitId}),this.$$("options").clearAll(),this.$$("options").data.importData(i)}return this.getRoot().show(t,null,{pos:"bottom"}),this.$$("search").focus(),this.Defer},e}(s.default);e.default=u},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=function(t){function e(){return i(this,e),r(this,t.apply(this,arguments))}return o(e,t),e.prototype.config=function(){return{rows:[{view:"tabbar",localId:"tabs",options:[{id:"reports.statistics",value:"Statistics"},{id:"reports.unitsbystate",value:"Units by state"},{id:"reports.integrity",value:"Integrity"},{id:"reports.topusers",value:"Top users"}]},{$subview:!0}]}},e.prototype.init=function(){this.use(a.d.Menu,"tabs")},e}(a.b);e.default=s},function(t,e,n){"use strict";function i(t,e){return remote.api.report.byTime(t.start,e).then(function(e){var n={Available:0,Taken:0,Broken:0,Deprecated:0};return e.forEach(function(t){n[Object(r.a)(t.status)]=t.total}),n.point=t.start,h.push(n),{date:webix.Date.add(t.start,1,"month",!0),data:h}}).then(function(n){return n.date<=t.end?i({start:n.date,end:t.end},e):(h=[],n.data)})}n.d(e,"h",function(){return o}),n.d(e,"i",function(){return a}),n.d(e,"g",function(){return s}),n.d(e,"d",function(){return u}),n.d(e,"f",function(){return c}),n.d(e,"e",function(){return l}),n.d(e,"b",function(){return p}),n.d(e,"c",function(){return f}),e.a=i;var r=n(4),o=remote.api.report.newOnes,a=remote.api.report.statusOnes,s=remote.api.report.getHorders,u=remote.api.report.getLostUnits,c=remote.api.report.getOwnedBroken,l=remote.api.report.getMixedOwned,p=remote.api.report.getArchivedSubtypes,f=remote.api.report.getArchivedUnits,h=[]},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){return"<span class='webix_icon part_icon mdi mdi-menu-"+(e.StrictMode?"down":"up")+'\'></span>\n\t&nbsp;<span class="unit_property_name">'+t.name+"</span>&nbsp;"+(t.serial||"")}function s(){var t=this.getParentView().queryView("datatable"),e=this.$view.querySelectorAll(".webix_icon.part_icon")[0];t.isVisible()?(t.hide(),e.className=e.className.replace("up","down")):(t.show(),e.className=e.className.replace("down","up"))}Object.defineProperty(e,"__esModule",{value:!0});var u=n(0),c=n(2),l=n(68),p=(n.n(l),n(32)),f=n(33),h=function(t){function e(n,o){i(this,e);var a=r(this,t.call(this,n,o));return a.Options=o.options,a.Data=o.data||a.Options.filter(function(t){return t.isMandatory}),a.StrictMode=o.strict,a}return o(e,t),e.prototype.config=function(){var t=this,e=[];if(this.Options.length){var n=this.Data.map(function(t){if(t.relatedId){var e=webix.copy(c.a.getItem(t.relatedId));return e.UnitTypeId=e.id,e.id=webix.uid(),e}return{id:t.id,name:c.a.getItem(t.UnitTypeId).name,details:t.details,Properties:t.Properties,serial:t.serial}});e=[{view:"label",label:"Parts",autoheight:!0},{view:"formlayout",localId:"parts",name:"Parts",data:n,margin:8,hidden:!n.length,rows:[{css:"complex_sub_section",rows:[{template:function(e){return"<div>"+a(e,t)+" "+p.a+"</div>"},height:40,name:"$value",css:"part_property_panel",borderless:!0,onClick:{removeIcon:function(){var t=this.data.id,e=this.$scope.$$("parts");if(this.StrictMode){this.$scope.getSubView("typeselector").AddUnit(t)}e.remove(t)},part_property_panel:s}},{view:"datatable",autoheight:!0,scroll:!1,editable:!0,name:"Properties",header:!1,hidden:this.StrictMode,rowHeight:28,select:!0,css:"part_property_sheet",borderless:!0,columns:[{id:"name",css:"property_name_column"},{id:"value",editor:"text",fillspace:2}],on:{onItemClick:function(t){this.editCell(t.row,"value")},onBlur:function(){this.unselect()}}}]}]},{height:13},{name:"typeselector",$subview:new f.default(this.app,{data:this.Options.map(function(t){return c.a.getItem(t.relatedId)}),strict:this.StrictMode})}]}return{hidden:!e.length,rows:e}},e.prototype.init=function(){var t=this.$$("parts");t&&t.data.attachEvent("onStoreUpdated",function(){t.count()?t.show():t.hide()})},e.prototype.AddPart=function(t){return this.$$("parts").add(t)},e}(u.b);e.default=h},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=function(t){function e(n,o){i(this,e);var a=r(this,t.call(this,n,o));return a.Data=o.Data,a}return o(e,t),e.prototype.config=function(){for(var t=[],e=0;e<this.Data.length;e++){var n=this.Data[e];t.push({view:"text",label:n.name,value:n.value,name:"property_"+n.id,labelPosition:"top",required:!!n.isMandatory,validate:n.isMandatory?this.webix.rules.isNotEmpty:""})}return{rows:t}},e}(a.b);e.default=s},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=n(9),u=function(t){function e(){return i(this,e),r(this,t.apply(this,arguments))}return o(e,t),e.prototype.config=function(){var t=this,e={view:"toolbar",css:"webix_bg_2",padding:{left:8},cols:[{view:"search",localId:"search",on:{onTimedKeyPress:function(){var e=t.$$("search").getValue().toLowerCase().trim();t.$$("list").filter(function(t){return-1!==t.name.toLowerCase().indexOf(e)})}}},{view:"icon",icon:"mdi mdi-plus",tooltip:"Add new role",click:function(){t.$$("list").unselect(),t.setParam("id","0"),t.show("./tags.form/0")}}]},n={view:"list",localId:"list",select:!0,css:"webix_bg_2 multi-line-box",type:{template:"#name#",height:"auto"},on:{onBeforeSelect:function(e){t.setParam("id",e);var n=t.$$("list"),i=!t.app.Mobile;return t.show("./tags.form/"+e).then(function(){i&&(n.blockEvent(),n.select(e),n.unblockEvent())}),!1}}},i={width:this.app.Size.databar,rows:[e,n]};return this.app.Mobile?i:{cols:[i,{$subview:!0}]}},e.prototype.init=function(){this.use(a.d.UrlParam,["id"])},e.prototype.ready=function(){var t=this,e=!this.app.Mobile;Object(s.b)().then(function(){var n=t.$$("list"),i=t.getParam("id");!i&&e&&(i=s.a.getFirstId()),n.sync(s.a),i&&"none"!=i?n.select(i):e&&t.show("empty"),t.on(s.a.data,"onIdChange",function(n,i){e&&t.$$("list").select(i)}),t.on(t.app,"onFormFinish",function(n,i){t.contains(n)&&e&&!i&&(t.setParam("id","none"),t.show("empty"))})})},e}(a.b);e.default=u},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=n(1),u=n(2),c=n(3),l=n(70),p=n(71),f=n(4),h=n(34),d=n(35),b=n(8),y=function(t){function e(){return i(this,e),r(this,t.apply(this,arguments))}return o(e,t),e.prototype.config=function(){var t=this,e=this.app.getService("auth").hasAccess("EditData");this.Table=new(this.app.Mobile?d.default:h.default)(this.app);var n={view:"toolbar",localId:"toolbar",paddingX:24,height:44,visibleBatch:"default",cols:[{view:"label",label:"All units",batch:"default",localId:"label"},{view:"icon",icon:"mdi mdi-magnify",localId:"searchIcon",batch:"default",click:this.ShowSearch},{view:"icon",icon:"mdi mdi-sync",batch:"default",click:function(){Object(s.i)()}},{view:"icon",icon:"mdi mdi-plus",batch:e?"default":"hidden",click:function(){t.show("units.popups.add")}},{view:"icon",icon:"mdi mdi-arrow-left",batch:"filter",width:20,click:function(){t.show("../units?flush=true")}},{view:"template",borderless:!0,localId:"tags",css:"filter_tags",template:function(t){return t.type&&t.status?'<span class="tags_container"><span class="filter_tag">'+t.type+'</span><span class="filter_tag">'+t.status+"</span></span>":""}},{view:"text",batch:"filter",css:"filter_search",placeholder:'Type in to search by number, type, name, user, date (operators >, <, or "", dates as 11.31.2019, 11.2019, or 2019)',localId:"searchField",on:{onTimedKeyPress:function(){return t.FilterUnits(t.$$("searchField").getValue())}}}]},i={type:"space",cols:[{rows:[n,this.Table]},{$subview:!0,popup:!0}]};return this.app.Mobile||i.cols.splice(1,0,b.default),i},e.prototype.init=function(){this.types=u.a},e.prototype.urlChange=function(){var t=this,e=this.getParam("type"),n=this.getParam("status");e&&n?(this.$$("toolbar").showBatch("filter"),this.$$("searchField").focus(),this.$$("tags").show(),this.types.waitData.then(function(){var i=t.types.getItem(e).name;t.$$("tags").setValues({type:i,status:Object(f.a)(n)});var r=t.$$("tags").getNode().getElementsByClassName("tags_container")[0].offsetWidth+8;t.$$("tags").define("width",r),t.$$("tags").resize()})):(this.$$("toolbar").showBatch("default"),this.$$("tags").setValues({}),this.$$("searchField").setValue(""),this.$$("tags").hide())},e.prototype.FilterUnits=function(t){var e=this;if(t=t.trim(),"#"===t[0])return Object(s.g)(t.substr(1)).then(function(t){var n={};t.forEach(function(t){return n[t.id]=1}),e.Table.getRoot().filter(function(t){return n[t.id]})});var n=t.toLowerCase(),i=n.indexOf(":");if(0===i){var r=n.substr(i+1).trim();this.Table.getRoot().filter(function(t){var e=-1!==t.serial.toLowerCase().indexOf(r),n=!!t.nickname&&-1!==t.nickname.toLowerCase().indexOf(r);return e||n})}else{if(-1!==i){var o=n.substr(0,i).trim(),a=u.a.find(function(t){return t.short.toLowerCase()==o},!0);if(a){var f=n.substr(i+1).trim();return void this.Table.getRoot().filter(function(t){if(t.UnitTypeId!=a.id)return!1;var e=-1!==t.serial.toLowerCase().indexOf(f),n=!!t.nickname&&-1!==t.nickname.toLowerCase().indexOf(f);return e||n})}}this.Table.getRoot().filter(function(t){var e=-1!==t.serial.toLowerCase().indexOf(n),i=!!t.nickname&&-1!==t.nickname.toLowerCase().indexOf(n),r=Object(p.a)(u.a,n,t.UnitTypeId),o=!!t.name&&-1!==t.name.toLowerCase().indexOf(n),a=Object(p.a)(c.a,n,t.PersonId),s=Object(l.a)(n,t.start);return e||i||r||o||a||s})}},e.prototype.ShowSearch=function(){this.getParentView().showBatch("filter"),this.$scope.$$("searchField").focus()},e}(a.b);e.default=y},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=n(2),u=function(t){function e(){return i(this,e),r(this,t.apply(this,arguments))}return o(e,t),e.prototype.config=function(){var t=this,e={view:"toolbar",css:"webix_bg_2",padding:{left:8},cols:[{view:"search",localId:"search",on:{onTimedKeyPress:function(){var e=t.$$("search").getValue().toLowerCase().trim();t.$$("list").filter(function(t){return-1!==t.name.toLowerCase().indexOf(e)})}}},{view:"icon",icon:"mdi mdi-plus",tooltip:"Add new unit type",click:function(){t.$$("list").unselect(),t.setParam("id","0"),t.show("./unittypes.form/0")}}]},n={view:"list",localId:"list",select:!0,css:"webix_bg_2 multi-line-box",type:{template:"<span class='archived-#isArchived#''><span class='webix_icon #icon#'></span>#name#</span>",height:"auto"},on:{onBeforeSelect:function(e){var n=t.$$("list");t.setParam("id",e);var i=!t.app.Mobile;return t.show("./unittypes.form/"+e).then(function(){i&&(n.blockEvent(),n.select(e),n.unblockEvent())}),!1}}},i={width:this.app.Size.databar,rows:[e,n]};return this.app.Mobile?i:{cols:[i,{$subview:!0}]}},e.prototype.init=function(){this.use(a.d.UrlParam,["id"])},e.prototype.ready=function(){var t=this,e=!this.app.Mobile;s.a.waitData.then(function(){var n=t.$$("list"),i=t.getParam("id");!i&&e&&(i=s.a.getFirstId()),n.sync(s.a),i&&"none"!=i?n.select(i):e&&t.show("empty"),t.on(s.a.data,"onIdChange",function(n,i){e&&t.$$("list").select(i)}),t.on(t.app,"onFormFinish",function(n,i){t.contains(n)&&e&&!i&&(t.setParam("id","none"),t.show("empty"))})})},e}(a.b);e.default=u},function(t,e,n){"use strict";function i(){return remote.api.role.getRights()}function r(){return remote.api.role.getAll().then(function(t){o.clearAll(),o.parse(t)})}n.d(e,"a",function(){return o}),e.b=i,e.c=r;var o=new webix.DataCollection({url:remote.api.role.getAll,save:remote.api.role.save})},function(t,e,n){"use strict";function i(){return o().then(function(t){a.clearAll(),a.parse(t)})}n.d(e,"a",function(){return a}),e.b=i;var r=-1!=remote.data.user.rights.indexOf(remote.data.rights.EditUsers),o=r?remote.api.user.getAll:remote.api.auth.getUserNames,a=new webix.DataCollection({url:o,save:remote.api.user.save});remote.api.user.archive},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=function(t){function e(){return i(this,e),r(this,t.apply(this,arguments))}return o(e,t),e.prototype.config=function(){var t=this,e=this.app.getService("auth"),n={id:"settings",icon:"mdi mdi-account",value:"Settings",data:[]},i={view:"sidebar",localId:"nav",css:"webix_dark",scroll:!0,width:240,on:{onAfterSelect:function(){return t.app.trigger("SidebarNavigation")}},data:[{id:"units",icon:"mdi mdi-laptop-windows",value:"Units"},{id:"persons",icon:"mdi mdi-account-group",value:"Persons"},{id:"reports",icon:"mdi mdi-file-chart",value:"Reports"}]};return this.app.Mobile&&i.data.splice(0,0,{id:"storage",icon:"mdi mdi-server-network",value:"Storage"}),e.hasAccess("EditTypes")&&n.data.push({id:"unittypes",value:"Unit types"}),e.hasAccess("EditData")&&n.data.push({id:"tags",value:"Tags"}),e.hasAccess("EditUsers")&&(n.data.push({id:"auth.users",value:"Users"}),n.data.push({id:"auth.roles",value:"Roles"})),(e.hasAccess("EditUsers")||e.hasAccess("EditTypes")||e.hasAccess("EditData"))&&i.data.push(n),i},e.prototype.init=function(){this.use(a.d.Menu,{id:"nav",urls:{reports:"reports/reports.statistics"}})},e}(a.b);e.default=s},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=n(27),u=function(t){function e(){return i(this,e),r(this,t.apply(this,arguments))}return o(e,t),e.prototype.config=function(){var t=this;return{view:"popup",body:{view:"menu",layout:"y",autoheight:!0,width:150,template:"<span class='webix_icon mdi mdi-#icon#'></span>&nbsp;#value#",data:[{id:"settings",value:"Settings",icon:"settings"},{id:"logout",value:"Logout",icon:"logout-variant"}],on:{onMenuItemClick:function(e){"logout"===e?t.app.getService("auth").logout():(t.SettingsView.Show(),t.getRoot().hide())}}}}},e.prototype.init=function(){this.SettingsView=this.ui(s.default)},e.prototype.Show=function(t){this.getRoot().show(t)},e}(a.b);e.default=u},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(5),s=n(66),u=function(t){function e(n){var o;return i(this,e),o=r(this,t.call(this,n,{header:{view:"toolbar",height:56,padding:{left:6,top:9,bottom:9,right:12},cols:[{view:"icon",icon:"wxi-close",click:function(){return o.Hide()}},{view:"label",label:"Edit personal settings"},{view:"button",value:"Cancel",width:76,hotkey:"esc",click:function(){return o.Hide()}},{view:"button",type:"form",value:"Save",width:76,hotkey:"ctrl+enter",click:function(){o.SaveRecord()}}]},body:{view:"form",localId:"form",borderless:!1,elements:[{view:"text",name:"name",label:"Name",required:!0},{view:"text",name:"email",label:"Email",disabled:!0},{view:"text",type:"password",name:"pass",label:"Password",placeholder:"Leave empty to preserve password"},{}],rules:{name:webix.rules.isNotEmpty}}}))}return o(e,t),e.prototype.Show=function(){this.getRoot().show()},e.prototype.Hide=function(){this.getRoot().hide()},e.prototype.init=function(){t.prototype.init.call(this);var e=this.app.getService("auth").getUser(),n=this.$$("form");n.clear(),n.setValues({name:e.name,email:e.email}),n.focus()},e.prototype.SaveRecord=function(){var t=this.$$("form");t.validate()&&(t.setDirty(!1),Object(s.a)(t.getValues()),this.Hide())},e}(a.default);e.default=u},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=function(t){function e(){return i(this,e),r(this,t.apply(this,arguments))}return o(e,t),e.prototype.config=function(){return{width:395,css:"topstub",template:'\n\t\t\t\t<p>Select a unit<br>or<br>click "Assign unit"<br>to add a new one.</p>\n\t\t\t'}},e}(a.b);e.default=s},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(6),s=n(1),u=function(t){function e(n){var o;return i(this,e),o=r(this,t.call(this,n,{template:function(t){return'<span class="name_of_unit">'+t.name+'</span> <span class="units_in_stock">'+(t.instock||"Out of stock")+"</span>"},selectionHandler:function(t){o.Defer.resolve(t.toString()),o.getRoot().hide()}}))}return o(e,t),e.prototype.Show=function(t,e){var n=this;return this.Defer=new webix.promise.defer,this.$$("options").clearAll(),e.data.each(function(t){var e=s.e.find(function(e){return t.id==e.UnitTypeId&&0==e.status&&!e.MasterUnitId});t.instock=e.length,e.length?(t.$css&&delete t.$css,t.disabled&&delete t.disabled,t.hide&&delete t.hide):t.isArchived?t.hide=!0:(t.disabled=!0,t.$css="disabled")}),this.$$("options").sync(e,function(){n.$$("options").filter(function(t){return!t.hide}),n.$$("options").sort("instock","desc")}),this.getRoot().show(t,null,{pos:"bottom"}),this.Defer},e}(a.default);e.default=u},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=n(1),u=n(17),c=function(t){function e(){return i(this,e),r(this,t.apply(this,arguments))}return o(e,t),e.prototype.config=function(){var t=webix.Date.dateToStr("%M '%y");return{rows:[{view:"chart",localId:"chart",type:"stackedArea",alpha:.7,height:300,borderless:!0,xAxis:{template:function(e){return t(e.point)}},yAxis:{},series:[{value:"#Available#",color:"#55CD97"},{value:"#Taken#",color:"#1CA1C1"},{value:"#Broken#",color:"#FF5C4C"},{value:"#Deprecated#",color:"#94A1B3"}]},{template:" "}]}},e.prototype.GetReport=function(t){var e=this;s.e.waitData.then(function(){Object(u.a)(t.dates,t.type).then(function(t){e.ParseData(t)})})},e.prototype.ParseData=function(t){var e=this.$$("chart");e.config.legend||e.define("legend",{values:[{text:"Available",color:"#55CD97"},{text:"Taken",color:"#1CA1C1"},{text:"Broken",color:"#FF5C4C"},{text:"Deprecated",color:"#94A1B3"}],valign:"middle",align:"right",width:110,layout:"y",marker:{type:"round",width:7,height:8}}),e.clearAll(),e.parse(t)},e}(a.b);e.default=c},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t){var e=Object(f.a)(t.status);return"<span class='status_marker "+e+"'>"+e+"</span>"}Object.defineProperty(e,"__esModule",{value:!0});var s=n(0),u=n(1),c=n(2),l=n(3),p=n(17),f=n(4),h=function(t){function e(){return i(this,e),r(this,t.apply(this,arguments))}return o(e,t),e.prototype.config=function(){var t=this,e="Click to sort units";return{view:"datatable",localId:"data",css:"units_table",tooltip:!0,select:!0,borderless:!0,columns:[{id:"MasterUnitId",header:"",width:46,template:function(t){return t.MasterUnitId?"<span class='webix_icon mdi mdi-wrench-outline'></span>":""},tooltip:function(t){return t.MasterUnitId?"A part of "+u.e.getItem(t.MasterUnitId).name:""}},{id:"status",header:{text:"Status",tooltip:e},width:102,template:a,tooltip:!1,sort:"int"},{id:"serial",header:{text:"Serial",tooltip:e},width:96,sort:"string",tooltip:!1},{id:"UnitTypeId",header:{text:"Type",tooltip:e},fillspace:1,sort:"text",tooltip:!1,template:function(t){var e=c.a.getItem(t.UnitTypeId);return e?e.name+"<span style='float:left;margin:10px 7px 0 0;' class='webix_icon "+e.icon+"'></span>":""}},{id:"name",header:{text:"Name",tooltip:e},fillspace:2,sort:"string",tooltip:!1},{id:"PersonId",header:{text:"Assigned to",tooltip:e},options:l.a,fillspace:1,sort:"text",tooltip:!1},{id:"start",header:{text:"From",tooltip:e},fillspace:1,format:webix.i18n.longDateFormatStr,sort:"date",tooltip:!1}],on:{onItemClick:function(e){t.show("units.popups.details/"+e)},onAfterRender:function(){this.count()?this.hideOverlay():this.showOverlay("<p>Nothing here</p>")}}}},e.prototype.init=function(){this.webix.extend(this.$$("data"),webix.OverlayBox)},e.prototype.GetReport=function(t){var e=this;Promise.all([u.e.waitData,c.a.waitData]).then(function(){var n=[];"new"===t.status?("number"!=typeof t.type&&(t.type=null),Object(p.h)(t.dates.start,t.dates.end,t.type).then(function(i){i.forEach(function(t){n.push(u.e.getItem(t.id))}),e.ParseData(n,{type:t.type?c.a.getItem(t.type).name:"All units",count:n.length})})):Object(p.i)(t.dates.start,t.dates.end,t.status,t.type).then(function(i){i.forEach(function(t){n.push(u.e.getItem(t.id))}),e.ParseData(n,{type:t.type?c.a.getItem(t.type).name:"All units",count:n.length})})})},e.prototype.ParseData=function(t,e){var n=this.$$("data");n.clearAll(),n.parse(t),this.getParentView().SetCounters(e)},e}(s.b);e.default=h},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i="<span class='removeIcon webix_icon mdi mdi-delete'></span>"},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=n(1),u=n(15),c=n(2),l=function(t){function e(n,o){i(this,e);var a=r(this,t.call(this,n,o));return a.Data=o.data,a.StrictMode=o.strict,a}return o(e,t),e.prototype.config=function(){var t=this,e=[];if(this.Data.length){e=[{view:"formlayout",localId:"units",margin:8,rows:[{name:"$value",template:function(e){return e.id?'<div class="part_inner_container '+e.id+" "+(!e.instock&&t.StrictMode?"part_unavailable":"")+'">\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<span class="webix_icon mdi mdi-plus "></span>\n\t\t\t\t\t\t\t\t\t<span class="add_part_label">Add '+e.name.toLowerCase()+"</span>\n\t\t\t\t\t\t\t\t\t"+(t.StrictMode?'<span class="parts_in_stock">'+e.instock+" available</span>":"")+"\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>":""},borderless:!0,height:41,css:"add_part_template",onClick:{part_inner_container:function(e){var n=e.path||(e.composedPath?e.composedPath():null);if(n){var i=n.find(function(t){return-1!==t.className.indexOf("part_inner_container")}),r=i.className.split(" ");r[2]||t.OpenPartsMenu(i,r[1])}else webix.message("Your browser does not support e.path","error")}}}]}]}return{hidden:!e.length,rows:e}},e.prototype.init=function(){var t=this;this.UnitSelector=this.ui(u.default),s.e.waitData.then(function(){t._partCollections={},t.Data.forEach(function(e){t._partCollections[e.id]=new webix.DataCollection({});var n=s.e.find(function(t){return e.id==t.UnitTypeId&&0==t.status&&!t.MasterUnitId});e.instock=n.length,t._partCollections[e.id].parse(n)}),t.$$("units").parse(t.Data)})},e.prototype.OpenPartsMenu=function(t,e){var n=this;if(this.StrictMode)this.UnitSelector.Show(t,e,this._partCollections[e]).then(function(t){return Object(s.h)(t)}).then(function(t){n.getParentView().AddPart({id:t.id,name:c.a.getItem(t.UnitTypeId).name,Properties:t.Properties,serial:t.serial}),n._partCollections[e].remove(t.id),n.$$("units").updateItem(t.UnitTypeId,{instock:n._partCollections[t.UnitTypeId].count()})});else{var i=webix.copy(c.a.getItem(e));i.UnitTypeId=i.id,i.id=webix.uid(),this.getParentView().AddPart(i)}},e.prototype.AddUnit=function(t){var e=this;Object(s.h)(t).then(function(t){e._partCollections[t.UnitTypeId].add(t),e.$$("units").updateItem(t.UnitTypeId,{instock:e._partCollections[t.UnitTypeId].count()})})},e}(a.b);e.default=l},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t){var e=Object(p.a)(t.status);return"<span class='status_marker "+e+"'>"+e+"</span>"}Object.defineProperty(e,"__esModule",{value:!0});var s=n(0),u=n(1),c=n(2),l=n(3),p=n(4),f=function(t){function e(){return i(this,e),r(this,t.apply(this,arguments))}return o(e,t),e.prototype.config=function(){var t=this,e="Click to sort units";return{view:"datatable",localId:"data",css:"units_table",tooltip:!0,select:!0,columns:[{id:"MasterUnitId",header:"",width:46,template:function(t){return t.MasterUnitId?"<span class='webix_icon mdi mdi-wrench-outline'></span>":""},tooltip:function(t){return t.MasterUnitId?"A part of "+u.e.getItem(t.MasterUnitId).name:""}},{id:"status",header:{text:"Status",tooltip:e},width:102,template:a,tooltip:!1,sort:"int"},{id:"serial",header:{text:"Serial",tooltip:e},width:96,sort:"string",tooltip:!1},{id:"UnitTypeId",header:{text:"Type",tooltip:e},fillspace:1,sort:"text",tooltip:!1,template:function(t){var e=c.a.getItem(t.UnitTypeId);return e?e.name+"<span style='float:left;margin:10px 7px 0 0;' class='webix_icon "+e.icon+"'></span>":""}},{id:"name",header:{text:"Name",tooltip:e},fillspace:2,sort:"string",tooltip:!1},{id:"PersonId",header:{text:"Assigned to",tooltip:e},options:l.a,fillspace:1,sort:"text",tooltip:!1},{id:"start",header:{text:"From",tooltip:e},fillspace:1,format:webix.i18n.longDateFormatStr,sort:"date",tooltip:!1}],on:{onAfterSelect:function(e){t.show("units.popups.details/"+e)},onAfterRender:function(){this.count()?this.hideOverlay():this.showOverlay("<p>Nothing here</p>")}}}},e.prototype.init=function(){this.webix.extend(this.$$("data"),webix.OverlayBox)},e.prototype.urlChange=function(t,e){var n=this.getParam("type"),i=this.getParam("status"),r=this.$$("data");if(e.length<2)r.unselect();else if(e.length>2){var o=e[2].page;r.exists(o)&&(r.select(o),r.showItem(o))}var a=this.getParam("flush"),s=n+":"+i;if(this._cache!=s||a){this._cache=s,a&&this.setParam("flush",!1);var c=u.e;n&&(c=new webix.DataCollection,c.sync(u.e,function(){i?c.filter(function(t){return t.UnitTypeId==n&&t.status==i}):c.filter(function(t){return t.UnitTypeId==n})})),r.sync(c)}},e}(s.b);e.default=f},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t){var e=Object(p.a)(t.status);return"<span class='status_marker "+e+'\' style="float:right;">'+e+"</span>"}Object.defineProperty(e,"__esModule",{value:!0});var s=n(0),u=n(1),c=n(2),l=n(3),p=n(4),f=function(t){function e(){return i(this,e),r(this,t.apply(this,arguments))}return o(e,t),e.prototype.config=function(){var t=this;return{view:"list",localId:"data",css:"multi-line-box",select:!0,type:{height:"auto",template:function(t){return"\n"+a(t)+"\n"+(t.MasterUnitId?"<span class='webix_icon mdi mdi-wrench-outline part-icon'></span>":"")+'\n<span style="font-weight:500;">'+t.serial+" "+c.a.getItem(t.UnitTypeId).name+", "+t.name+"</span>\n"+(t.PersonId?"\n\t<br>Owned by: "+l.a.getItem(t.PersonId).name+"\n":"")+"\n<br>Added on "+webix.i18n.dateFormatStr(t.start)}},on:{onItemClick:function(e){t.show("units.popups.details/"+e)}}}},e.prototype.urlChange=function(){var t=this;Promise.all([l.a.waitData,u.e.waitData,c.a.waitData]).then(function(){var e=t.getParam("type"),n=t.getParam("status"),i=u.e;e&&(i=new webix.DataCollection,i.sync(u.e,function(){n?i.filter(function(t){return t.UnitTypeId==e&&t.status==n}):i.filter(function(t){return t.UnitTypeId==e})})),t.$$("data").sync(i)})},e}(s.b);e.default=f},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=n(2),u=n(9),c=n(18),l=n(19),p=function(t){function e(){return i(this,e),r(this,t.apply(this,arguments))}return o(e,t),e.prototype.config=function(){var t=this;return s.a.waitData.then(function(){var e=new webix.DataCollection({});return e.sync(s.a,function(){return e.filter(function(t){return!t.isArchived})}),t.UnitType||(t.UnitType=e.getItem(e.getFirstId())),{view:"form",scroll:!0,localId:"form",margin:20,borderless:!1,rows:[].concat({rows:[{cols:[{view:"richselect",name:"UnitTypeId",value:t.UnitType.id,on:{onChange:function(n){t.UnitType=e.getItem(n),webix.delay(function(){return t.refresh()})}},suggest:{body:{css:"unit-type-popup-list",template:"<span class='webix_icon #icon#'></span>&nbsp;&nbsp;&nbsp;#name#"},data:e}},{view:"text",label:"Quantity",name:"count",labelAlign:"right",value:1,width:150}]}]},[new l.default(t.app,{Data:t.UnitType.Properties}),new c.default(t.app,{options:t.UnitType.Parts}),{view:"multicombo",name:"tags",label:"Tags",labelPosition:"top",options:u.a},{view:"textarea",height:120,name:"details",label:"Notes",labelPosition:"top"},{gravity:.001}])}}).catch(window.console.error)},e.prototype.ready=function(){this.$$("form").focus()},e.prototype.GetValues=function(){var t=this.$$("form");if(t.validate()){var e=t.getValues();return{data:{Parts:e.Parts?e.Parts.map(function(t){return{UnitTypeId:t.UnitTypeId,details:"",Properties:t.Properties.map(function(t){return{id:t.id,value:t.value}})}}):[],Properties:this.UnitType.Properties.map(function(t){var n={id:t.id,value:e["property_"+t.id]};return delete e["property_"+t.id],n}),UnitTypeId:e.UnitTypeId,tags:e.tags,details:e.details},count:e.count}}},e}(a.b);e.default=p},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t){var e=c.e.getItem(t),n=l.a.getItem(e.UnitTypeId),i=void 0;return 0===e.status?i="in store":90===e.status?i="broken":99===e.status?i="deprecated":1==e.status&&(i="assigned to <a class='details-link' href='/inv/persons/"+e.PersonId+"/persons.details'>"+f.a.getItem(e.PersonId).name+"<a>"),"<a class='details-link unitOfPerson "+e.id+"'>"+n.name+" "+e.serial+"</a>, "+i}function s(t,e){var n=l.a.getItem(t);return(e?"":"<span class='webix_icon part_icon mdi mdi-menu-down'></span>&nbsp;")+'<span class="unit_property_name">'+n.name+"</span>"}Object.defineProperty(e,"__esModule",{value:!0});var u=n(0),c=n(1),l=n(2),p=n(9),f=n(3),h=n(38),d=n(39),b=n(50),y=n(4),w=function(t){function e(){return i(this,e),r(this,t.apply(this,arguments))}return o(e,t),e.prototype.config=function(){var t=this,e=this.app.getService("auth").hasAccess("EditData");return{localId:"content",css:"template-scroll-y",scroll:!0,borderless:!1,template:function(t){if(!t.id)return"";var n=Object(y.a)(t.status);return"\n<div>\n\n"+(t.Tags?"\n<div class='tag_line'>\n\t"+t.Tags.split(",").map(function(t){return"<span style='color:"+p.a.getItem(t).color+"'>#"+p.a.getItem(t).name}).join("</span> ")+"</span>\n</div>\n":"")+"\n\n<div class='markers-box'>\n\t<span class=\"unit_property_name\">Status</span>\n"+(e?"\n\t<span class='selection-link marker'>"+n+"</span>\n\t<span class='webix_icon mdi mdi-menu-down selection-icon marker'></span>\n":n)+"\n</div>\n<div class='feature_line'>\n\t<span class=\"unit_property_name\">Assigned to</span>\n"+(e?"\n\t<span class='selection-link assignLink'>"+(t.PersonId?f.a.getItem(t.PersonId).name:"No one")+"</span>\n\t<span class='webix_icon mdi mdi-menu-down selection-icon assignLink'></span>\n":t.PersonId?f.a.getItem(t.PersonId).name:"No one")+"\n</div>\n"+(t.MasterUnitId?"\n\t<div class='feature_line'><span class=\"unit_property_name\">Included in:</span> "+a(t.MasterUnitId)+"</div>\n":"")+"\n"+(t.MasterOriginId&&t.MasterOriginId!=t.MasterUnitId?"\n\t<div class='feature_line'><span class=\"unit_property_name\">Originally, was a part of:</span> "+a(t.MasterOriginId)+"</div>\n":"")+"\n\n"+(t.nickname?"\n<div class='feature_line'>\n\t<span class=\"unit_property_name\">Also known as</span> "+t.nickname+"\n</div>\n":"")+"\n"+t.Properties.map(function(t){return"\n\t<div class='unit-property-box'><span class=\"unit_property_name\">"+t.name+":</span> "+t.value+"</div>\n"}).join("")+"\n\n"+(t.Parts.length?"<div class='details-box'>\n"+t.Parts.map(function(t){return'\n\t<div class=\'component-box\'>\n\t\t<div class="part_name">\n\t\t\t<span class="part_name_text">'+s(t.UnitTypeId)+" "+t.serial+" "+(t.name?" ("+t.name+")":"")+'</span>\n\t\t\t<span class="webix_icon mdi mdi-settings-outline view_part_details '+t.id+'" title="Go to details"></span>\n\t\t</div>\n\t\t<div class="part_details">\n\t\t\t'+t.Properties.map(function(t){return"\n\t\t\t<div class='property-box'><span class=\"unit_property_name\">"+t.name+":</span> "+t.value+"</div>\n\t\t\t"}).join("")+"\n\t\t</div>\n\t</div>\n"}).join("")+"\n</div>":"")+"\n"+(t.details?"<div class='comments-box'><div class='details_title'>Notes</div><div class=\"details_text\">"+t.details+"</div></div>":"")+"\n<div>"+b.b(t.UnitLogs,t.StatusHistories)+"</div>\n</div>\n"},onClick:{assignLink:function(e){return t.AssignTo(e.target)},"component-box":function(e){return t.TogglePartsDetails(e)},marker:function(e){t.MarkerPopup.Show(e.target)},view_part_details:function(e){var n=e.target.className.split(" ").pop();return isNaN(parseInt(n))||t.show("units.popups.details/"+n),!1},unitOfPerson:function(e){var n=e.target.className.split(" ").pop();isNaN(parseInt(n))||t.show("units.popups.details/"+n)},"logs-link":function(t){t.target.style.display="none",document.getElementById("unit_logs").style.display=""}}}},e.prototype.init=function(){var t=this;this.use(u.d.UrlParam,["id"]),this.UserSelectorPopup=this.ui(h.default),this.MarkerPopup=this.ui(d.default),this.on(this.app,"onStatusSelect",function(e){t.ChangeStatus(e)}),this.$$("content").attachEvent("onAfterScroll",function(){webix.callEvent("onClick")})},e.prototype.urlChange=function(){var t=this,e=this.getParam("id");Promise.all([l.a.waitData,f.a.waitData,b.a,p.a.waitData]).then(function(){t.getRoot()&&t.RefreshDetails(e)})},e.prototype.RefreshDetails=function(t){var e=this;Object(c.h)(t||this.Unit.id).then(function(t){e.Unit=t,e.$$("content").setValues(e.Unit),e.app.callEvent("onDetailsRefresh",[{name:l.a.getItem(t.UnitTypeId).name,serial:t.serial,start:new Date(t.start)}])})},e.prototype.AssignTo=function(t){var e=this;this.UserSelectorPopup.Show(t).then(function(t){return Object(c.b)(e.Unit.id,t)}).then(function(){return e.RefreshDetails()})},e.prototype.ChangeStatus=function(t){var e=this;Object(c.d)(this.Unit.id,t,!0).then(function(){return e.RefreshDetails()})},e.prototype.TogglePartsDetails=function(t){var e=t.path||(t.composedPath?t.composedPath():null);if(e){var n=e.find(function(t){return!!t.className&&-1!=t.className.indexOf("component-box")}),i=n.querySelectorAll(".webix_icon.part_icon")[0],r=n.querySelectorAll(".part_details")[0];-1!==i.className.indexOf("down")?(r.style.height="auto",i.className=i.className.replace("down","up")):(i.className=i.className.replace("up","down"),r.style.height="0")}else webix.message("Your browser does not support e.path","error")},e.prototype.Finish=function(){this.show("../units")},e}(u.b);e.default=w},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(6),s=n(3),u=function(t){function e(n){return i(this,e),r(this,t.call(this,n,{template:function(t){return'<span class="user_avatar">'+t.name.slice(0,1)+'</span>\n\t\t\t\t\t<span class="selection_user_name">'+t.name+'</span>\n\t\t\t\t\t<span class="selection_user_email">'+t.email.slice(0,t.email.indexOf("@"))+"</span>"},selectionHandler:function(t){this.Defer.resolve(t),this.Hide()},placeholder:"Search by name and email",filter:function(){var t=this.getValue().toLowerCase().trim();this.$scope.$$("options").filter(function(e){var n=-1!==e.name.toLowerCase().indexOf(t),i=-1!==e.email.toLowerCase().indexOf(t);return n||i})},width:354}))}return o(e,t),e.prototype.Show=function(t){this.Defer=new webix.promise.defer;var e=new webix.DataCollection({});return e.sync(s.a,function(){e.filter(function(t){return!t.end})}),this.$$("options").sync(e),this.getRoot().show(t.parentNode,{x:20},{pos:"bottom"}),this.Defer},e}(a.default);e.default=u},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(6),s=n(72),u=function(t){function e(n){return i(this,e),r(this,t.call(this,n,{data:Object(s.a)(),template:function(t){return t.value+'<span class="'+t.value.toLowerCase()+'-marker ball">'+t.value.slice(0,1)+"</span>"},selectionHandler:function(t){this.app.callEvent("onStatusSelect",[parseInt(t)]),this.Hide()}}))}return o(e,t),e.prototype.Show=function(t){this.$$("options").parse(Object(s.a)()),this.getRoot().show(t.parentNode,{x:20},{pos:"bottom"})},e}(a.default);e.default=u},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=n(1),u=n(2),c=n(9),l=n(18),p=n(19),f=function(t){function e(){return i(this,e),r(this,t.apply(this,arguments))}return o(e,t),e.prototype.config=function(){return this.Unit?{view:"form",scroll:!0,localId:"form",margin:20,borderless:!1,rows:[new p.default(this.app,{Data:this.Unit.Properties}),new l.default(this.app,{data:this.Unit.Parts,options:u.a.getItem(this.Unit.UnitTypeId).Parts,strict:!0}),{view:"multicombo",name:"tags",value:this.Unit.Tags,label:"Tags",labelPosition:"top",options:c.a},{view:"textarea",height:120,name:"details",value:this.Unit.details,placeholder:"Type notes",label:"Notes",labelPosition:"top"},{gravity:.001}]}:{}},e.prototype.GetValues=function(){var t=this.getRoot().getValues(),e=t.Parts?t.Parts.map(function(t){return{id:t.id,details:"",Properties:t.Properties.map(function(t){return{id:t.id,value:t.value}})}}):[],n=[];for(var i in t)-1!=i.indexOf("property_")&&n.push({id:i.split("_")[1],value:t[i]});return{Parts:e,Properties:n,id:this.Unit.id,tags:t.tags,details:t.details}},e.prototype.init=function(){this.use(a.d.UrlParam,["id"]),this.Ready=webix.promise.defer()},e.prototype.ready=function(){this.Ready.resolve()},e.prototype.urlChange=function(){var t=this,e=this.getParam("id");this.Unit&&this.Unit.id==e||Promise.all([Object(s.h)(e),u.a.waitData,this.Ready]).then(function(e){return t.Unit=e[0],t.UnitType=u.a.getItem(e[0].UnitTypeId),t.app.callEvent("onInfoReady",[{name:t.UnitType.name,serial:t.Unit.serial}]),t.refresh()}).then(function(){t.$$("form").focus()})},e}(a.b);e.default=f},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=n(60),u=(n.n(s),n(32)),c=n(61),l=function(t){function e(){return i(this,e),r(this,t.apply(this,arguments))}return o(e,t),e.prototype.config=function(){var t=this;return{rows:[{view:"forminput",name:"Properties",label:"Properties",labelPosition:"top",body:{view:"formtable",editable:!0,localId:"ptable",autoheight:!0,checkboxRefresh:!0,columns:[{id:"name",header:"Label",editor:"text",fillspace:!0},{id:"value",header:"Default",width:100,editor:"text"},{id:"isPartOfName",header:"Name",width:70,template:c.a},{id:"isMandatory",header:"Required",width:70,template:c.a},{width:35,template:u.a}],onClick:{removeIcon:function(t,e){this.remove(e)}},rules:{name:this.webix.rules.isNotEmpty}}},{template:"<a class='addPropertyLink action-link'>Add property</a>",borderless:!0,height:20,onClick:{addPropertyLink:function(){var e=t.$$("ptable"),n=e.add({name:"",value:"",isMandatory:!1});e.editCell(n,"name")}}},{height:20}]}},e}(a.b);e.default=l},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=n(2),u=n(60),c=(n.n(u),n(32)),l=n(61),p=function(t){function e(){return i(this,e),r(this,t.apply(this,arguments))}return o(e,t),e.prototype.config=function(){var t=this;return{rows:[{view:"forminput",name:"Parts",label:"Parts",labelPosition:"top",body:{view:"formtable",editable:!0,localId:"atable",autoheight:!0,checkboxRefresh:!0,columns:[{id:"relatedId",header:"Part name",editor:"richselect",fillspace:!0,suggest:{body:{template:"<span class='webix_icon #icon#'></span>&nbsp;&nbsp;&nbsp;#name#"}},collection:s.a,template:function(t){var e=s.a.getItem(t.relatedId);return e?"<span class='webix_icon "+e.icon+"'></span>&nbsp;&nbsp;"+e.name:""}},{id:"isPartOfName",header:"Name",width:70,template:l.a},{id:"isMandatory",header:"Default",width:70,template:l.a},{width:35,template:c.a}],onClick:{removeIcon:function(t,e){this.remove(e)}},rules:{relatedId:this.webix.rules.isNotEmpty}}},{template:"<a class='addPropertyLink action-link'>Add part</a>",borderless:!0,height:20,onClick:{addPropertyLink:function(){var e=t.$$("atable"),n=e.add({name:"",value:"",isMandatory:!1});e.editCell(n,"relatedId")}}},{height:20}]}},e}(a.b);e.default=p},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=n(23),u=n(44),c=(n.n(u),n(11)),l=n(7),p=function(t){function e(){return i(this,e),r(this,t.apply(this,arguments))}return o(e,t),e.prototype.config=function(){var t=this,e={view:"toolbar",padding:{left:17},cols:[{view:"button",label:"Save",hotkey:"ctrl+enter",type:"form",width:120,click:function(){return t.SaveRecord()}},{view:"button",label:"Delete",width:120,click:function(){return t.DeleteRecord()}},{},Object(l.a)(this)]},n={view:"checktable",localId:"table",name:"rights",borderless:!0,columns:[{id:"name",width:320,fillspace:!0,header:["Access rights",{content:"textFilter",placeholder:"Type to filter..."}],template:function(t){return"<span class='"+(t.on?"allowed":"denied")+"-marker'>\n"+(t.on?"Allowed":"Denied")+"\n</span> "+t.name}}]};return{rows:[e,{type:"clean",cols:[{view:"form",localId:"form",maxWidth:480,scroll:!0,elementsConfig:{labelPosition:"top"},rules:{name:webix.rules.isNotEmpty},rows:[{view:"text",name:"name",label:"Name"},n]},{gravity:.001}]}]}},e.prototype.init=function(){var t=this;this.use(a.d.UrlParam,["id"]),this.use(a.d.UnloadGuard,function(){if(t.Role&&t.$$("form").isDirty())return Object(c.b)()}),this.Ready=Promise.all([Object(s.b)().then(function(e){return t.$$("table").parse(e)}),s.a.waitData])},e.prototype.urlChange=function(){var t=this;this.Ready.then(function(){var e=t.getParam("id",!0);if(e){t.Role="0"!=e?s.a.getItem(e):{};var n=t.$$("form");n.clear(),t.Role&&n.setValues(t.Role),n.focus()}})},e.prototype.SaveRecord=function(){var t=this.$$("form");if(t.validate()){t.setDirty(!1);var e=t.getValues();this.Role.id?s.a.updateItem(this.Role.id,e):s.a.add(e),this.Finish()}},e.prototype.DeleteRecord=function(){var t=this;Object(c.a)("Role",this.Role.id).then(function(){t.Role.id&&s.a.remove(t.Role.id),t.Role=null,t.Finish()})},e.prototype.Show=function(){this.getRoot().show(!0)},e.prototype.Finish=function(){this.app.Mobile?this.show("./auth.roles"):this.app.callEvent("onFormFinish",[this,this.Role])},e}(a.b);e.default=p},function(t,e){webix.protoUI({name:"checktable",$init:function(){this.attachEvent("onItemClick",function(t){var e=this.getItem(t);this.updateItem(t,{on:!e.on})})},$allowsClear:!0,setValue:function(t){var e=this;if(this.eachRow(function(t){return e.getItem(t).on=!1}),t)t.split(",").forEach(function(t){return e.getItem(t).on=!0});else{var n=this.getFilter("name");n&&(n.value="")}this.refresh()},getValue:function(){return this.serialize().filter(function(t){return t.on}).map(function(t){return t.id}).join(",")}},webix.ui.datatable)},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=n(24),u=n(23),c=n(44),l=(n.n(c),n(11)),p=n(7),f=function(t){function e(){return i(this,e),r(this,t.apply(this,arguments))}return o(e,t),e.prototype.config=function(){var t=this,e={view:"toolbar",padding:{left:17},cols:[{view:"button",label:"Save",hotkey:"ctrl+enter",type:"form",width:120,click:function(){return t.SaveRecord()}},{view:"button",label:"Disable",localId:"archive",width:120,click:function(){return t.DisableRecord()}},{},Object(p.a)(this)]},n={view:"checktable",localId:"table",autoheight:!0,name:"roles",borderless:!0,columns:[{id:"name",width:320,fillspace:!0,header:["Roles",{content:"textFilter",placeholder:"Type to filter..."}],template:function(t){return"<span class='"+(t.on?"allowed":"denied")+"-marker'>\n"+(t.on?"Allowed":"Denied")+"\n</span> "+t.name}}]};return{rows:[e,{type:"clean",cols:[{view:"form",localId:"form",maxWidth:480,scroll:!0,elementsConfig:{labelPosition:"top"},rules:{name:webix.rules.isNotEmpty,email:webix.rules.isEmail},rows:[{view:"text",name:"name",label:"Name"},{view:"text",name:"email",label:"Email"},{view:"text",type:"password",name:"pass",label:"Password",placeholder:"Leave empty to preserve password"},n,{view:"textarea",name:"details",height:120,label:"Comments"}]},{gravity:.001}]}]}},e.prototype.init=function(){var t=this;this.use(a.d.UrlParam,["id"]),this.use(a.d.UnloadGuard,function(){if(t.User&&t.$$("form").isDirty())return Object(l.b)()}),this.Ready=Promise.all([u.a.waitData.then(function(){return t.$$("table").data.importData(u.a)}),s.a.waitData])},e.prototype.urlChange=function(){var t=this;this.Ready.then(function(){var e=t.getParam("id",!0);e&&(t.User="0"!=e?s.a.getItem(e):{isArchived:!1},t.Refresh())})},e.prototype.Refresh=function(){var t=this.$$("form");t.clear(),this.User&&t.setValues(this.User),t.focus();var e=this.User.id?this.User.isArchived?"Enable":"Disable":"Cancel";this.$$("archive").setValue(e),this.User.isArchived?t.disable():t.enable()},e.prototype.SaveRecord=function(){var t=this.$$("form");if(t.validate()){t.setDirty(!1);var e=t.getValues();this.User.id?s.a.updateItem(this.User.id,e):s.a.add(e),this.Finish()}},e.prototype.DisableRecord=function(){if(!this.User.id)return this.User=null,this.Finish();var t=!this.User.isArchived;s.a.updateItem(this.User.id,{isArchived:t}),this.Finish()},e.prototype.Finish=function(){this.app.Mobile?this.show("./auth.users"):(this.app.callEvent("onFormFinish",[this,this.User]),this.User&&this.Refresh())},e}(a.b);e.default=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){return{css:"topstub",template:'\n<p>Select record in the list,<br><br>\nor <br><br> click the "plus" icon <br>to add a new one.</p>\n'}}},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=n(25),u=n(26),c=function(t){function e(){return i(this,e),r(this,t.apply(this,arguments))}return o(e,t),e.prototype.config=function(){var t=this,e=this.app.getService("auth").getUser().name,n={view:"toolbar",height:56,padding:{right:12},cols:[{view:"icon",icon:"mdi mdi-menu",click:function(){return t.ToggleSidebar()}},{view:"label",label:"Inventory App",css:"webix_app_header"},{template:'<div class="main_user_avatar">'+e.slice(0,1)+"</div>",css:"main_user_avatar_template",width:50,borderless:!0,localId:"avatar"},{view:"label",label:e,autowidth:!0,css:"main_user_name_label"}]};return this.app.Mobile?{rows:[n,{$subview:!0}]}:{rows:[n,{cols:[s.default,{$subview:!0}]}]}},e.prototype.init=function(){var t=this;this.PopupMenuView=this.ui(u.default),this.app.Mobile&&(this.Sidemenu=this.ui({view:"sidemenu",position:"left",body:s.default}),this.on(this.app,"SidebarNavigation",function(){t.Sidemenu.isVisible()&&t.Sidemenu.hide()}));var e=this.getRoot();webix.extend(e,webix.ProgressBar),this.on(webix,"onRemoteCall",function(t){e.showProgress({type:"top",delay:2e3}),t.finally(function(){e.hideProgress()})}),this.on(webix,"onRemoteError",function(t){window.console.error(t),webix.message({type:"error",text:"Server side error<br>"+t})}),this.getUrl().length<2&&this.show(this.app.Mobile?"storage":"units")},e.prototype.ToggleSidebar=function(){this.app.Mobile?this.Sidemenu.isVisible()?this.Sidemenu.hide():this.Sidemenu.show():this.getRoot().queryView({view:"sidebar"}).toggle()},e}(a.b);e.default=c},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=function(t){function e(){return i(this,e),r(this,t.apply(this,arguments))}return o(e,t),e.prototype.config=function(){var t=this,e={view:"form",localId:"form",rows:[{view:"text",required:!0,name:"email",label:"Your Email",labelPosition:"top"},{view:"button",value:"Restore",inputWidth:130,align:"center",click:function(){return t.Restore()},hotkey:"enter",css:"webix_primary"},{view:"template",height:30,borderless:!0,template:"\n<div style='text-align:right'>\nAlready have an account?\n<a class ='action-link' route='./login'>Sign in.</a>\n</div>"}]},n={type:"header",template:"Restore a password",css:"webix_dark"},i={view:"window",position:"center",head:n,body:e};return this.app.Mobile?i.fullscreen=!0:e.width=450,i},e.prototype.init=function(){this.getRoot().show(),this.$$("form").focus()},e.prototype.Restore=function(){var t=this,e=this.$$("form").getValues().email;this.app.getService("backend").api.auth.restore(e).then(function(){t.$$("form").hide(),webix.modalbox({width:450,title:"Reset password",text:"We have sent a verfication email to your email address.<br>\n\t\t\t\t\t\tPlease click on the link provided in the email",buttons:[]})})},e}(a.b);e.default=s},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t){return l.a.getItem(t.UnitTypeId).icon}Object.defineProperty(e,"__esModule",{value:!0});var s=n(0),u=n(28),c=n(3),l=n(2),p=n(1),f=n(29),h=n(15),d=n(7),b=n(50),y=function(t){function e(){return i(this,e),r(this,t.apply(this,arguments))}return o(e,t),e.prototype.config=function(){var t=this,e={view:"toolbar",padding:{left:22},elements:[Object(d.a)(this),{view:"label",localId:"userName"}]},n={localId:"content",height:46,css:"person_details_template",borderless:!0,template:function(t){return t.id?'\n<div class="details"><span class="contact">Email</span><a class=\'action-link\' href=\'mailto:'+t.email+"'>"+t.email+'</a></div>\n<div class="details"><span class="contact">Skype</span><a class=\'action-link\' href=\'skype:'+t.skype+"?chat'>"+t.skype+"</a></div>\n"+(t.end?'<div class="details"><span class="fired">Fired on:</span>'+webix.i18n.longDateFormatStr(new Date(t.end))+"</div>":"")+"\n"+(t.details?'<div class="details"><span class="contact">Notes</span>'+t.details+"</div>":"")+"\n":""}},i={rows:[{view:"treetable",localId:"parts",select:!0,autoheight:!0,type:{folder:function(t){return'<span class="webix_icon units_tree_icon '+a(t)+'"></span>'}},columns:[{id:"UnitTypeId",header:"Type",fillspace:1,minWidth:100,sort:"text",template:function(t,e){var n=l.a.getItem(t.UnitTypeId);return n?e.treetable(t,e)+" "+n.name:""}},{id:"serial",header:"Serial",width:96,sort:"string"},{id:"name",header:"Name",fillspace:2,sort:"string"},{id:"start",header:"From",fillspace:1,format:webix.i18n.longDateFormatStr,sort:"date"}],on:{onAfterSelect:function(e){t.show("units.popups.details/"+e)}}},{localId:"overlay",template:"<div>No units assigned</div>",height:40,css:"selection_list_overlay"}]},r={view:"align",align:"left",body:{view:"button",type:"form",value:"Assign Unit",localId:"assign-unit",width:160,css:"add_units_button",height:32,click:function(){return t.AssignUnit()}}},o={template:function(t){return""+b.b(t.UnitLogs)},borderless:!0,onClick:{unitOfPerson:function(e){var n=e.target.className.split(" ").pop();isNaN(parseInt(n))||t.show("units.popups.details/"+n)}}},s=[{view:"scrollview",scroll:"y",body:{rows:[e,{paddingX:24,paddingY:20,margin:16,rows:[n,i,r,o]}]}},{$subview:!0,popup:!0}];return this.app.Mobile||s.splice(1,0,u.default),{cols:s}},e.prototype.init=function(){var t=this;this.use(s.d.UrlParam,["id"]),this.Ready=Promise.all([c.a.waitData,p.e.waitData]),this.TypeSelector=this.ui(f.default),this.UnitSelector=this.ui(h.default),this.$$("parts").data.attachEvent("onStoreUpdated",function(){t.$$("parts").count()?t.$$("overlay").hide():t.$$("overlay").show()}),this.on(p.e.data,"onStoreUpdated",function(e,n,i){t.ReloadDetails(i)})},e.prototype.urlChange=function(){this.ReloadDetails()},e.prototype.AssignUnit=function(){var t=this,e=this.$$("assign-unit").$view;this.TypeSelector.Show(e,l.a).then(function(n){return t.UnitSelector.Show(e,n)}).then(function(e){t._lastAdded=e,Object(p.b)(e,t.Person.id)})},e.prototype.ReloadDetails=function(t){var e=this,n=this.$$("parts");if(this._tableState=n.getState(),this.getUrl().length<3)this.$$("parts").unselect();else if(this.getUrl().length>2){var i=this.getUrl()[3].page;n.exists(i)&&n.select(i)}var r=this.getParam("id",!0),o=r;(this._cache!=o||t)&&(this._cache=o,Promise.all([Object(c.b)(r),this.Ready,b.a]).then(function(t){e.Person=t[0],e.$$("content").setValues(e.Person),e.$$("content").define("autoheight",!0),e.$$("userName").setValue(e.Person.name);var i=new e.webix.DataCollection({data:e.Person.Units,scheme:{$init:function(t){t.data=t.Parts,t.start=new Date(t.start);for(var e=0;e<t.data.length;e++)t.data[e].start=new Date(t.data[e].start)},$serialize:function(t){t.start=t.start.toISOString();for(var e=0;e<t.data.length;e++)t.data[e].start=t.data[e].start.toISOString();t.Parts=t.data,delete t.data}}});n.sync(i),e._tableState&&n.setState(e._tableState),e.app.Mobile||e._lastAdded&&(n.select(e._lastAdded),e._lastAdded=null),!e.app.getService("auth").hasAccess("EditData")||e.Person.end?e.$$("assign-unit").disable():e.$$("assign-unit").enable()}))},e}(s.b);e.default=y},function(t,e,n){"use strict";function i(t){return t.UserId?"<span>"+l.a.getItem(t.UserId).name+"</span>":""}function r(t){return"<a class='details-link' href='/inv/persons/"+t.PersonId+"/persons.details/"+t.PersonId+"'>"+p.a.getItem(t.PersonId).name+"</a>"}function o(t){return a({UnitId:t.RelatedId})}function a(t){var e=f.e.getItem(t.UnitId);return"<a class='details-link unitOfPerson "+e.id+"'>"+h.a.getItem(e.UnitTypeId).name+" "+e.serial+"</a>"}function s(t){switch(t.status){case 0:return"In Store";case 1:return"Assigned";case 90:return"Broken";case 99:return"Deprecated"}}function u(t,e,n,i){return'<svg class="history-road" xmlns="http://www.w3.org/2000/svg" width="100%">\n\t<foreignObject x="0" y="0" width="76" height="20">\n\t\t<div xmlns="http://www.w3.org/1999/xhtml" class="history_status '+Object(d.a)(t)+'">\n\t\t  '+Object(d.a)(t)+'\n\t\t</div>\n\t  </foreignObject>\n\t<circle cx="90" cy="9" r="4" class="rode-node '+Object(d.a)(t)+'" />\n\t'+(i?"":'<line x1="90" y1="14" x2="90" y2="54" class="rode-node '+Object(d.a)(t)+'" />')+'\n\t<foreignObject x="97" y="0" width="75%" height="20">\n\t\t<div xmlns="http://www.w3.org/1999/xhtml">\n\t\t  <span class="history-start-date">'+e+"</span>\n\t\t  "+(1==t?'<span class="history-owner">by '+p.a.getItem(n).name+"</span>":"")+"\n\t\t</div>\n\t  </foreignObject>\n\t</svg>"}function c(t,e){if(!t)return"";var n=t.map(function(t){var e="<span class='log-date' title=\""+t.logDate+'">'+webix.i18n.longDateFormatStr(new Date(t.logDate))+"</span>";switch(t.type){case 1:return e+"\t "+a(t)+" registered by "+i(t);case 5:return e+"\t "+a(t)+" assigned to "+r(t)+" by "+i(t);case 6:return e+"\t "+a(t)+" status changed to "+s(t)+" by "+i(t);case 2:return e+"\t "+o(t)+" status changed to "+s(t)+" by "+i(t);case 7:return e+"\t "+a(t)+" unassigned from "+r(t)+" by "+i(t);case 3:return e+"\t "+a(t)+" "+t.text+" by "+i(t);case 4:return e+"\t "+o(t)+" "+t.text+" by "+i(t);case 8:return e+"\t "+a(t)+" extracted from "+o(t)+" by "+i(t);case 9:return e+"\t "+o(t)+" extracted from "+a(t)+" by "+i(t);case 10:return e+"\t "+a(t)+" added to "+o(t)+" by "+i(t);case 11:return e+"\t "+o(t)+" added to "+a(t)+" by "+i(t);default:return"code: "+t.type}}),c=webix.Date.dateToStr("%j %M %y"),l=e.map(function(t,e,n){return"\n\t<div class='history-line "+Object(d.a)(t.status)+"'>\n\t"+u(t.status,c(new Date(t.start)),t.PersonId,++e==n.length)+"\n\t</div>"}).join(" "),p="<div class='road-box'>\n\t"+l+'\n\t</div>\n\t<div class="logs-link">Show detailed logs</div>';return n.length?"<div class='unitlog-box'><div class='details_title'>Logs</div>\n\t"+p+'\n\t<div id="unit_logs" style="display:none;margin-top:10px;">'+n.join("</p><p>")+"</div>\n\t</div>":""}n.d(e,"a",function(){return b}),e.b=c;var l=n(24),p=n(3),f=n(1),h=n(2),d=n(4),b=webix.promise.all([l.a.waitData,p.a.waitData,f.e.waitData,h.a.waitData])},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=n(17),u=n(1),c=n(2),l=function(t){function e(){return i(this,e),r(this,t.apply(this,arguments))}return o(e,t),e.prototype.config=function(){var t=this;return{rows:[{view:"scrollview",body:{view:"datalayout",localId:"errors",padding:20,rows:[{rows:[{template:function(t){return'<span class="'+(t.issues?"errors":"all_good")+'">'+t.title+": "+(t.issues||"None")+"</span>"},borderless:!0,height:26,name:"header"},{view:"template",autoheight:!0,name:"data",borderless:!0,css:"integrity_problem_details",template:function(t){for(var e="",n=0;n<t.length;++n)e+='<div class="integrity_issue '+t[n].id+" "+(t[n].UnitTypeId||"")+'">\n\t\t\t\t\t\t\t\t\t\t\t\t<span class="issue_unit_column">'+(t[n].serial||t[n].id)+'</span>\n\t\t\t\t\t\t\t\t\t\t\t\t<span class="issue_unit_column">'+(t[n].UnitTypeId?c.a.getItem(t[n].UnitTypeId).name:t[n].short)+'</span>\n\t\t\t\t\t\t\t\t\t\t\t\t<span class="issue_unit_column">'+t[n].name+"</span>\n\t\t\t\t\t\t\t\t\t\t\t\t<span>"+(t[n].nickname||(t[n].subtype?"Archived part: "+c.a.getItem(t[n].subtype).name:""))+"</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>";return e},onClick:{integrity_issue:function(e){var n=e.path||(e.composedPath?e.composedPath():null);if(n){var i=n.find(function(t){return-1!==t.className.indexOf("integrity_issue")}),r=i.className.split(" ");r[1]&&(r[2]?t.show("units.popups.details/"+r[1]):t.app.show("/inv/unittypes/"+r[1]))}else webix.message("Your browser does not support ev.path","error")}}}]}]}},{$subview:!0,popup:!0}]}},e.prototype.init=function(){var t=this;Promise.all([Object(s.d)(),Object(s.f)(),Object(s.e)(),Object(s.b)(),Object(s.c)(),u.e.waitData,c.a.waitData]).then(function(e){for(var n=["Lost units (assigned to fired users)","Broken or deprecated units, assigned to someone","Units and their parts that belong to different users","Archived unit types as parts of other unit types","Archived unit types that are still in store"],i=[],r=0;r<e.length;++r){var o=e[r];if(o){for(var a=o.length,s=[],l=0;l<o.length;++l){var p=void 0;o[l].subtype?(p=c.a.getItem(o[l].id),p.subtype=o[l].subtype):p=u.e.getItem(o[l].id),s.push(p)}i.push({header:{issues:a,title:n[r]},data:s})}}t.$$("errors").parse(i)})},e}(a.b);e.default=l},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=n(2),u=n(30),c=function(t){function e(){return i(this,e),r(this,t.apply(this,arguments))}return o(e,t),e.prototype.config=function(){var t=this;return{rows:[{view:"form",localId:"values",cols:[{view:"icon",icon:"wxi-angle-left",localId:"prev",click:function(){return t.ChangePeriod(-1)}},{view:"daterangepicker",localId:"dates",name:"dates",width:220,readonly:!0},{view:"icon",icon:"wxi-angle-right",localId:"next",click:function(){return t.ChangePeriod(1)}},{view:"richselect",width:120,value:"12",localId:"dateMode",options:[{id:"year",value:"Year"},{id:"12",value:"12 months"}],on:{onChange:function(e){return t.SetPeriod(e)}}},{},{view:"combo",name:"type",width:220,placeholder:"Select a unit type",suggest:{data:s.a,body:{css:"unit_types_selector_list"}}}],paddingX:20,paddingY:10,margin:0,on:{onChange:function(){return t.SendValues()}}},{$subview:u.default,name:"chart"}]}},e.prototype.ready=function(){var t=this;s.a.waitData.then(function(){var e={dates:{start:webix.Date.monthStart(webix.Date.add(new Date,-11,"month")),end:webix.Date.monthStart(webix.Date.add(new Date,1,"month"))},type:s.a.getFirstId()};t.$$("values").setValues(e),t.SendValues()})},e.prototype.SendValues=function(){var t=this.$$("values"),e=t.getValues();e.type&&this.getSubView("chart").GetReport(e)},e.prototype.SetPeriod=function(t){var e={};switch(t){case"year":e.start=webix.Date.yearStart(new Date),e.end=webix.Date.yearStart(webix.Date.add(new Date,1,"year"));break;case"12":e.start=webix.Date.monthStart(webix.Date.add(new Date,-11,"month")),e.end=webix.Date.monthStart(webix.Date.add(new Date,1,"month"))}this.$$("dates").setValue(e)},e.prototype.ChangePeriod=function(t){var e=this.$$("dateMode").getValue(),n=this.$$("dates").getValue(),i={start:webix.Date.copy(n.start),end:webix.Date.copy(n.end)};switch(e){case"year":i.start=webix.Date.add(i.start,1*t,"year"),i.end=webix.Date.add(i.end,1*t,"year");break;case"12":i.start=webix.Date.monthStart(webix.Date.add(i.start,12*t,"month")),i.end=webix.Date.monthStart(webix.Date.add(i.end,12*t,"month"))}this.$$("dates").setValue(i)},e}(a.b);e.default=c},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t){if(t>5)return"surplus"}Object.defineProperty(e,"__esModule",{value:!0});var s=n(0),u=n(17),c=n(3),l=function(t){function e(){return i(this,e),r(this,t.apply(this,arguments))}return o(e,t),e.prototype.config=function(){var t=this;return{view:"datatable",localId:"table",select:!0,css:"top_users_table",columns:[{id:"total",header:"Units",css:"total_units",cssFormat:a},{id:"name",header:"User",fillspace:3},{id:"email",header:"Email",fillspace:1},{id:"skype",header:"Skype",fillspace:1}],on:{onAfterSelect:function(e){t.app.show("/inv/persons/"+e)}}}},e.prototype.init=function(){var t=this;Promise.all([c.a.waitData,Object(u.g)()]).then(function(e){var n=e[1],i=[];n.forEach(function(t){var e=c.a.getItem(t.id);e.total=t.total,i.push(e)}),t.$$("table").parse(i)})},e}(s.b);e.default=l},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=n(31),u=n(2),c=n(67),l=function(t){function e(){return i(this,e),r(this,t.apply(this,arguments))}return o(e,t),e.prototype.config=function(){var t=this;return{rows:[{view:"form",localId:"values",cols:[{view:"icon",icon:"wxi-angle-left",localId:"prev",click:function(){return t.ChangePeriod(-1)}},{view:"daterangepicker",localId:"dates",name:"dates",width:220,value:{start:webix.Date.monthStart(new Date),end:webix.Date.monthStart(webix.Date.add(new Date,1,"month"))},suggest:{view:"daterangesuggest",body:{button:!1,icons:!1}},on:{onChange:function(e){if(e.start&&e.end){var n=webix.Date.datePart(e.end)-webix.Date.datePart(e.start);c.a.some(function(t){return t==n})||t.$$("dateMode").setValue("")}}}},{view:"icon",icon:"wxi-angle-right",localId:"next",click:function(){return t.ChangePeriod(1)}},{view:"richselect",width:120,value:"month",localId:"dateMode",placeholder:"Custom",options:[{$empty:!0,id:"$empty",value:"Custom"},{id:"month",value:"Month"},{id:"year",value:"Year"},{id:"12",value:"12 months"}],on:{onChange:function(e){return t.SetPeriod(e)}}},{},{view:"richselect",width:110,value:"new",name:"status",options:[{id:"new",value:"Added"},{id:99,value:"Deprecated"},{id:90,value:"Broken"}]},{view:"combo",name:"type",minWidth:120,placeholder:"All units",suggest:{data:u.a,body:{css:"unit_types_selector_list"}}}],paddingX:20,paddingY:10,margin:0,on:{onChange:function(){return t.SendValues()}}},{localId:"counters",height:27,borderless:!0,template:function(t){return t.type?'<span class="unit_type_name">'+t.type+"</span>: "+t.count:""}},{$subview:s.default,name:"table"},{$subview:!0,popup:!0}]}},e.prototype.ready=function(){this.SendValues()},e.prototype.SendValues=function(){var t=this.$$("values"),e=t.getValues();e.dates.start&&e.dates.end&&(this.$$("dates").getPopup().hide(),this.getSubView("table").GetReport(e))},e.prototype.SetPeriod=function(t){if(t){var e={};switch(t){case"month":e.start=webix.Date.monthStart(new Date),e.end=webix.Date.monthStart(webix.Date.add(new Date,1,"month"));break;case"year":e.start=webix.Date.yearStart(new Date),e.end=webix.Date.yearStart(webix.Date.add(new Date,1,"year"));break;case"12":e.start=webix.Date.monthStart(webix.Date.add(new Date,-11,"month")),e.end=webix.Date.monthStart(webix.Date.add(new Date,1,"month"))}this.$$("dates").setValue(e)}},e.prototype.ChangePeriod=function(t){var e=this.$$("dateMode").getValue(),n=this.$$("dates").getValue();if(n.start&&n.end){var i={start:webix.Date.copy(n.start),end:webix.Date.copy(n.end)};if(e)switch(e){case"month":i.start=webix.Date.add(i.start,1*t,"month"),i.end=webix.Date.add(i.end,1*t,"month");break;case"year":i.start=webix.Date.add(i.start,1*t,"year"),i.end=webix.Date.add(i.end,1*t,"year");break;case"12":i.start=webix.Date.monthStart(webix.Date.add(i.start,12*t,"month")),i.end=webix.Date.monthStart(webix.Date.add(i.end,12*t,"month"))}else{var r=webix.Date.datePart(i.end)-webix.Date.datePart(i.start),o=r/864e5;i.start=webix.Date.add(i.start,t*o,"day"),i.end=webix.Date.add(i.end,t*o,"day")}this.$$("dates").setValue(i)}},e.prototype.SetCounters=function(t){this.$$("counters").setValues(t)},e}(a.b);e.default=l},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=n(9),u=n(11),c=n(7),l=function(t){function e(){return i(this,e),r(this,t.apply(this,arguments))}return o(e,t),e.prototype.config=function(){var t=this;return{rows:[{view:"toolbar",padding:{left:17},cols:[{view:"button",label:"Save",hotkey:"ctrl+enter",type:"form",width:120,click:function(){return t.SaveRecord()}},{view:"button",label:"Delete",width:120,click:function(){return t.DeleteRecord()}},{},Object(c.a)(this)]},{type:"clean",cols:[{view:"form",localId:"form",maxWidth:480,scroll:!0,elementsConfig:{labelPosition:"top"},rules:{name:webix.rules.isNotEmpty},rows:[{view:"text",name:"name",label:"Name"},{view:"colorpicker",name:"color",label:"Color"}]},{gravity:.001}]}]}},e.prototype.init=function(){var t=this;this.use(a.d.UrlParam,["id"]),this.use(a.d.UnloadGuard,function(){if(t.Tag&&t.$$("form").isDirty())return Object(u.b)()})},e.prototype.urlChange=function(){var t=this;s.a.waitData.then(function(){var e=t.getParam("id",!0);if(e){t.Tag="0"!=e?s.a.getItem(e):{};var n=t.$$("form");n.clear(),t.Tag&&n.setValues(t.Tag),n.focus()}})},e.prototype.SaveRecord=function(){var t=this.$$("form");if(t.validate()){t.setDirty(!1);var e=t.getValues();this.Tag.id?s.a.updateItem(this.Tag.id,e):s.a.add(e),this.Finish()}},e.prototype.DeleteRecord=function(){var t=this;Object(u.a)("Tag",this.Tag.id).then(function(){t.Tag.id&&s.a.remove(t.Tag.id),t.Tag=null,t.Finish()})},e.prototype.Show=function(){this.getRoot().show(!0)},e.prototype.Finish=function(){this.app.Mobile?this.show("./tags"):this.app.callEvent("onFormFinish",[this,this.Tag])},e}(a.b);e.default=l},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(5),s=n(1),u=n(36),c=function(t){function e(n){var o;return i(this,e),o=r(this,t.call(this,n,{header:{view:"toolbar",height:56,padding:{left:6,top:9,bottom:9,right:12},cols:[{view:"icon",icon:"wxi-close",click:function(){return o.Hide()}},{view:"label",label:"Add a new unit"},{view:"button",value:"Cancel",width:86,hotkey:"esc",click:function(){return o.Hide()}},{view:"button",type:"form",value:"Save",width:86,hotkey:"ctrl+enter",click:function(){if(!o.InProgress){var t=o.getSubView("form").GetValues(),e=t.data,n=t.count;n>0&&(o.InProgress=!0,Object(s.a)(e,n).then(function(t){return o.ShowDetails(t)}))}}}]},body:{$subview:u.default,name:"form"},modal:!0}))}return o(e,t),e.prototype.ShowDetails=function(t){this.show("units.popups.details/"+t)},e}(a.default);e.default=c},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(5),s=n(1),u=n(37),c=function(t){function e(n){var o;i(this,e);var a=n.getService("auth").hasAccess("EditData");return o=r(this,t.call(this,n,{header:{view:"toolbar",height:56,padding:{left:6,right:14},cols:[{view:"icon",icon:"wxi-close",click:function(){return o.Hide()}},{view:"label",id:"unitName",css:"details_popup_header_label"},{view:"icon",hidden:!a,icon:"wxi-pencil",click:function(){o.show("../units.popups.modify/"+o.getUrl()[1].page)}},{view:"icon",hidden:!0,localId:"deleteIcon",icon:"wxi-trash",click:function(){webix.confirm({text:"Do you really want to delete "+o.$$("unitName").getValue(),callback:function(t){t&&Object(s.f)(o.getUrl()[1].page).then(function(){return o.Hide()})}})}}]},body:u.default}))}return o(e,t),e.prototype.init=function(){var e=this;t.prototype.init.call(this),this.on(this.app,"onDetailsRefresh",function(t){e.app.getService("auth").hasAccess("EditData")&&Object(s.c)(t)?e.$$("deleteIcon").show():e.$$("deleteIcon").hide(),e.$$("unitName").setValue(t.name+" "+t.serial)})},e}(a.default);e.default=c},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(5),s=n(1),u=n(40),c=function(t){function e(n){var o;return i(this,e),o=r(this,t.call(this,n,{header:{view:"toolbar",height:56,padding:{left:6,top:9,bottom:9,right:12},cols:[{view:"icon",icon:"wxi-close",click:function(){return o.ShowDetails()}},{view:"label",id:"unitName",css:"modify_popup_header_label"},{view:"button",value:"Cancel",width:86,hotkey:"esc",click:function(){return o.ShowDetails()}},{view:"button",type:"form",value:"Save",width:86,hotkey:"ctrl+enter",click:function(){var t=o.getSubView("form").GetValues();Object(s.j)(t,!1).finally(function(){return o.ShowDetails()})}}]},body:{$subview:u.default,name:"form"}}))}return o(e,t),e.prototype.init=function(){var e=this;t.prototype.init.call(this),this.on(this.app,"onInfoReady",function(t){e.$$("unitName").setValue(t.name+" "+t.serial)})},e.prototype.ShowDetails=function(){this.show("units.popups.details/"+this.getUrl()[1].page)},e}(a.default);e.default=c},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t){for(var e=1,n=0;n<t.length;n++)e*=!(!t[n].name&&!t[n].relatedId);return e}Object.defineProperty(e,"__esModule",{value:!0});var s=n(0),u=n(2),c=n(41),l=n(42),p=n(7),f=n(73),h=n(11),d=function(t){function e(){return i(this,e),r(this,t.apply(this,arguments))}return o(e,t),e.prototype.config=function(){var t=this;return{rows:[{view:"toolbar",padding:{left:17},cols:[{view:"button",label:"Save",localId:"saveBtn",hotkey:"ctrl+enter",type:"form",width:120,click:function(){return t.SaveRecord()}},{view:"button",value:"Archive",localId:"archive",width:120,click:function(){return t.ArchiveRecord()}},{},Object(p.a)(this)]},{type:"clean",cols:[{view:"form",localId:"form",maxWidth:480,scroll:!0,elementsConfig:{labelPosition:"top"},rows:[{view:"text",name:"name",label:"Name",required:!0},{view:"text",name:"short",label:"Short name"},{view:"richselect",name:"icon",label:"Icon",suggest:{body:{template:"<span class='webix_icon #id#'></span>&nbsp;&nbsp;&nbsp;#value#"},data:[{id:"mdi mdi-micro-sd",value:"Card"},{id:"mdi mdi-camera",value:"Camera"},{id:"mdi mdi-vibrate",value:"Device"},{id:"mdi mdi-minidisc",value:"Mini disk"},{id:"mdi mdi-harddisk",value:"Hard disk"},{id:"mdi mdi-keyboard",value:"Keyboard"},{id:"mdi mdi-laptop",value:"Laptop"},{id:"mdi mdi-memory",value:"Memory"},{id:"mdi mdi-dns",value:"Units"},{id:"mdi mdi-dip-switch",value:"Switch"},{id:"mdi mdi-cellphone-android",value:"Phone"},{id:"mdi mdi-desktop-tower",value:"Server"},{id:"mdi mdi-tablet",value:"Tablet"},{id:"mdi mdi-monitor",value:"Monitor"},{id:"mdi mdi-desktop-classic",value:"Desktop"},{id:"mdi mdi-desktop-mac-dashboard",value:"Dashboard"},{id:"mdi mdi-laptop-mac",value:"Notebook"},{id:"mdi mdi-television-classic",value:"TV"},{id:"mdi mdi-projector",value:"Projector"},{id:"mdi mdi-disc-player",value:"DVD"},{id:"mdi mdi-scanner",value:"Scanner"},{id:"mdi mdi-printer",value:"Printer"},{id:"mdi mdi-wrench",value:"Wrench"},{id:"mdi mdi-toolbox",value:"Toolbox"},{id:"mdi mdi-vector-square",value:"Square"},{id:"mdi mdi-ghost",value:"Ghost"},{id:"mdi mdi-gift",value:"Gift"},{id:"mdi mdi-toilet",value:"Toilet"},{id:"mdi mdi-seat-recline-normal",value:"Chair"},{id:"mdi mdi-cat",value:"Cat"},{id:"mdi mdi-chip",value:"Microchip"},{id:"mdi mdi-server",value:"Server"}]}},c.default,l.default,{view:"textarea",name:"details",height:120,label:"Comments"}],rules:{name:webix.rules.isNotEmpty,Properties:a,Parts:a}},{gravity:.001}]}]}},e.prototype.init=function(){var t=this;this.use(s.d.UrlParam,["id"]),this.use(s.d.UnloadGuard,function(){if(t.UnitType&&Object(f.a)(t.UnitType,t.$$("form").getValues(),{name:!0,details:!0,icon:!0,Properties:{name:!0,value:!0,isMandatory:!0},Parts:{relatedId:!0,isMandatory:!0}}))return Object(h.b)()}),this.Ready=Promise.all([u.a.waitData])},e.prototype.urlChange=function(){var t=this;this.Ready.then(function(){var e=t.getParam("id",!0);e&&(t.UnitType="0"!=e?u.a.getItem(e):{Parts:[],Properties:[],icon:"mdi-dragon"},t.Refresh())})},e.prototype.Refresh=function(){var t=this.$$("form");t.clear(),this.UnitType&&t.setValues(this.UnitType),t.focus();var e=this.UnitType.id?this.UnitType.isArchived?"Restore":"Archive":"Cancel";this.$$("archive").setValue(e),this.UnitType.isArchived?(t.disable(),this.$$("saveBtn").disable()):(t.enable(),this.$$("saveBtn").enable())},e.prototype.SaveRecord=function(){var t=this,e=this.$$("form");e.validate()&&(this.UnitType=e.getValues(),u.a.waitSave(function(){t.UnitType.id?u.a.updateItem(t.UnitType.id,t.UnitType):u.a.add(t.UnitType)}).then(function(){return t.Finish()}))},e.prototype.ArchiveRecord=function(){if(!this.UnitType.id)return this.UnitType=null,this.Finish();var t=!this.UnitType.isArchived;u.a.updateItem(this.UnitType.id,{isArchived:t}),this.Finish()},e.prototype.Finish=function(){this.app.Mobile?this.show("./unittypes"):(this.app.callEvent("onFormFinish",[this,this.UnitType]),this.UnitType&&0!=this.UnitType.id&&(this.UnitType=u.a.getItem(this.UnitType.id),this.Refresh()))},e}(s.b);e.default=d},function(t,e){webix.protoUI({name:"formtable",$init:function(){this.getParentView().$allowsClear=!0},setValue:function(t){this.clearAll(),this.parse(webix.copy(t))},getValue:function(){return this.serialize()}},webix.ui.datatable)},function(t,e,n){"use strict";function i(t,e,n){return n?"<div class='webix_table_checkbox webix_icon mdi mdi-checkbox-marked-outline checked'></div>":"<div class='webix_table_checkbox webix_icon mdi mdi-checkbox-blank-outline unchecked'></div>"}e.a=i},function(t,e){},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"InventoryApp",function(){return c});var a=n(64),s=(n.n(a),n(0)),u=n(75),c=function(t){function e(n){i(this,e);var o=r(this,t.call(this,webix.extend({id:"inventory",version:"1.0.0",start:"/inv",router:s.c,debug:!1},n,!0)));return o.Mobile=webix.env.mobile,o.Size=webix.env.mobile?{databar:-1}:{databar:265},o.attachEvent("app:error:resolve",function(t,e){window.console.error(e)}),o}return o(e,t),e.prototype.Init=function(t,e){this.setService("backend",e),this.setService("auth",new u.a(e.data.rights,e.data.user,e.reset)),e.data.user?this.render(t):this.render(t,"/login")},e}(s.a);e.default=c},function(t,e){},function(t,e,n){function i(t){return n(r(t))}function r(t){var e=o[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}var o={"./auth/roles":10,"./auth/roles/":10,"./auth/roles/form":43,"./auth/roles/form.js":43,"./auth/roles/index":10,"./auth/roles/index.js":10,"./auth/users":12,"./auth/users/":12,"./auth/users/form":45,"./auth/users/form.js":45,"./auth/users/index":12,"./auth/users/index.js":12,"./empty":46,"./empty.js":46,"./inv":47,"./inv.js":47,"./login":13,"./login/":13,"./login/index":13,"./login/index.js":13,"./login/restore":48,"./login/restore.js":48,"./persons":14,"./persons/":14,"./persons/details":49,"./persons/details.js":49,"./persons/empty":28,"./persons/empty.js":28,"./persons/index":14,"./persons/index.js":14,"./popupmenu":26,"./popupmenu.js":26,"./reports":16,"./reports/":16,"./reports/chart":30,"./reports/chart.js":30,"./reports/index":16,"./reports/index.js":16,"./reports/integrity":51,"./reports/integrity.js":51,"./reports/statistics":52,"./reports/statistics.js":52,"./reports/table":31,"./reports/table.js":31,"./reports/topusers":53,"./reports/topusers.js":53,"./reports/unitsbystate":54,"./reports/unitsbystate.js":54,"./sections/modal":5,"./sections/modal.js":5,"./sections/parts":18,"./sections/parts.js":18,"./sections/properties":19,"./sections/properties.js":19,"./sections/selection":6,"./sections/selection.js":6,"./sections/typeselector":33,"./sections/typeselector.js":33,"./sections/unitselector":15,"./sections/unitselector.js":15,"./settings":27,"./settings.js":27,"./sidebar":25,"./sidebar.js":25,"./storage":8,"./storage/":8,"./storage/index":8,"./storage/index.js":8,"./tags":20,"./tags/":20,"./tags/form":55,"./tags/form.js":55,"./tags/index":20,"./tags/index.js":20,"./units":21,"./units/":21,"./units/add":36,"./units/add.js":36,"./units/details":37,"./units/details.js":37,"./units/index":21,"./units/index.js":21,"./units/list":35,"./units/list.js":35,"./units/modify":40,"./units/modify.js":40,"./units/popups/add":56,"./units/popups/add.js":56,"./units/popups/details":57,"./units/popups/details.js":57,"./units/popups/marker":39,"./units/popups/marker.js":39,"./units/popups/modify":58,"./units/popups/modify.js":58,"./units/popups/typeselector":29,"./units/popups/typeselector.js":29,"./units/popups/userselector":38,"./units/popups/userselector.js":38,"./units/table":34,"./units/table.js":34,"./unittypes":22,"./unittypes/":22,"./unittypes/form":59,"./unittypes/form.js":59,"./unittypes/index":22,"./unittypes/index.js":22,"./unittypes/parts":42,"./unittypes/parts.js":42,"./unittypes/properties":41,"./unittypes/properties.js":41};i.keys=function(){return Object.keys(o)},i.resolve=r,t.exports=i,i.id=65},function(t,e,n){"use strict";function i(t){return remote.api.auth.updateSettings(t)}e.a=i},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i=[316224e5,31536e6,26784e5,2592e6,25056e5,24192e5]},function(t,e){webix.protoUI({name:"formlayout",setValue:function(t){this.clearAll(),this.parse(t)},getValues:function(){return this.serialize()},reconstruct:function(){this._in_reconstruct=!0,webix.ui.datalayout.prototype.reconstruct.call(this),this._in_reconstruct=!1},getValue:function(){return this._in_reconstruct?this.data.serialize():webix.ui.datalayout.prototype.getValue.call(this)}},webix.ui.datalayout)},function(t,e,n){"use strict";function i(t,e,n,i){var r=(i-90)*Math.PI/180;return{x:t+n*Math.cos(r),y:e+n*Math.sin(r)}}function r(t,e,n,r){var o=r/100*360;360==o&&(o-=1e-5);var a=i(t,e,n,o),s=i(t,e,n,0),u=o<=180?"0":"1";return["M",a.x,a.y,"A",n,n,0,u,0,s.x,s.y].join(" ")}e.a=r},function(t,e,n){"use strict";function i(t){if(!t)return"";var e=null,n=t.match(/[0-9]+/g);return n&&n.length?(n.length<3?(n.reverse(),e=new Date(n[0],(n[1]||1)-1,1)):e=webix.i18n.dateFormatDate(t.replace(/^[>< =]+/,"")),e):""}function r(t,e){var n=i(t);if(!n)return!1;var r=t.match(/[><]+/g);if(!(r=r?r[0]:null)){var o=t.match(/[0-9]+/g);return o.length<3?e.getYear()===n.getYear()&&(!o[1]||e.getMonth()===n.getMonth()):webix.Date.equal(webix.Date.datePart(n),webix.Date.datePart(e))}switch(r){case"<":return e<n;case">":return e>n}}e.a=r},function(t,e,n){"use strict";function i(t,e){return t.find(function(t){return-1!==t.name.toLowerCase().indexOf(e)})}function r(t,e,n){for(var r=i(t,e),o=!1,a=0;a<r.length;a++){if(n==r[a].id){o=!0;break}o=!1}return o}e.a=r},function(t,e,n){"use strict";function i(){return r}e.a=i;var r=[{id:"0",value:"Storage"},{id:"99",value:"Deprecated"},{id:"90",value:"Broken"}]},function(t,e,n){"use strict";function i(t,e,n){if(Array.isArray(t)){for(var o=0;o<t.length;o++){if(t.length!=e.length)return!0;if(i(t[o],e[o],n))return!0}return!1}for(var a in n)if(e!==t){var s=void 0===t[a]?"":t[a],u=void 0===e[a]?"":e[a];if("object"===(void 0===u?"undefined":r(u))){if(i(u,s,n[a]))return!0}else if(u.toString()!==s.toString())return!0}return!1}e.a=i;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}},function(t,e,n){function i(t){return n(r(t))}function r(t){var e=o[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}var o={"./en":62,"./en.js":62};i.keys=function(){return Object.keys(o)},i.resolve=r,t.exports=i,i.id=74},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(e,n,r){i(this,t),this._reset=r,this._rights=e,this.setUser(n)}return t.prototype.setUser=function(t){var e=this;return this.user=t,this._allowed={},this.user&&t.rights.forEach(function(t){return e._allowed[t]=!0}),t},t.prototype.getRights=function(){var t=[];for(var e in this._rights)t.push({id:this._rights[e],name:e});return t},t.prototype.getUser=function(){return this.user},t.prototype.login=function(t,e){var n=this;return webix.ajax().post("/auth/login",{email:t,pass:e}).then(function(t){return t=t.json(),t&&t.user&&n.setUser(t.user),n._reset()}).then(function(){return n.getUser()})},t.prototype.register=function(t,e,n){var i=this;return webix.ajax().post("/auth/register",{name:t,email:e,pass:n}).then(function(t){return t=t.json(),t&&t.user&&i.setUser(t.user),i._reset()}).then(function(){return i.getUser()})},t.prototype.logout=function(){return webix.send("/auth/logout",{})},t.prototype.hasAccess=function(t){var e=this._rights[t];if(!e)throw"Unknow access right name: "+t;return!!this._allowed[e]},t.prototype.guardAccess=function(t){if(!this.hasRight(t))throw"Access denied"},t}();e.a=r}])});